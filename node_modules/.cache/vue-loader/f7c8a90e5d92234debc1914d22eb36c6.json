{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\components\\context\\commentBox\\CommentBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\components\\context\\commentBox\\CommentBox.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldER5bmFtaWNDb20gfSBmcm9tICJuZXR3b3JrL2R5bmFtaWMiOwppbXBvcnQgc2VuZENvbW1lbnQgZnJvbSAiY29tcG9uZW50cy9jb250ZXh0L3NlbmRDb21tZW50L1NlbmRDb21tZW50IjsgLy8g5Y+R6YCB6K+E6K66CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkNvbW1lbnRCb3giLAogIHByb3BzOiBbImlzU2hvdyIsICJjb21tZW50SWQiXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGN0aHJlYWRJZDogMCwKICAgICAgY29tTGVuZ3RoOiAiIiwKICAgICAgY29tSG90OiBbXSwgLy8g54Ot6K+E5pWw57uECiAgICAgIGNvbUxpc3Q6IFtdLCAvLyDmma7pgJror4TorrrmlbDnu4QKICAgICAgdHlwZTogNiwgLy8g6K+E6K6657G75Z6LCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6Lez6L2s6Lev55SxCiAgICBwcm9maWxlKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvSW5mb3JtYXRpb24vIiArIGlkKTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudG9nZ2xlSW5mb3JtYXRpb24gPSAxOwogICAgfSwKCiAgICBzdWNjZXNzQ29tbWVudChjb21tZW50RGV0YWlsKSB7CiAgICAgIHRoaXMuY29tTGlzdC51bnNoaWZ0KHsKICAgICAgICBjb250ZW50OiBjb21tZW50RGV0YWlsLmNvbnRlbnQsIC8vIOivhOiuuuWGheWuuQogICAgICAgIGxpa2VkQ291bnQ6IDAsIC8vIOWWnOasouaVsOmHjwogICAgICAgIHRpbWU6IGNvbW1lbnREZXRhaWwudGltZSwgLy8g5Y+R5biD5pe26Ze05oizCiAgICAgICAgYXZhdGFyVXJsOiBjb21tZW50RGV0YWlsLmF2YXRhclVybCwgLy8g55So5oi35aS05YOPCiAgICAgICAgbmlja25hbWU6IGNvbW1lbnREZXRhaWwubmlja25hbWUsIC8vIOeUqOaIt+aYteensAogICAgICAgIHVzZXJJZDogY29tbWVudERldGFpbC5pZCwgLy8g55So5oi3aWQKICAgICAgfSk7CiAgICB9LAogIH0sCiAgY29tcG9uZW50czogewogICAgc2VuZENvbW1lbnQsCiAgfSwKICB3YXRjaDogewogICAgc2hvdygpIHsKICAgICAgaWYgKHRoaXMuc2hvdykgewogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICB0aGlzLmNvbWlkID0gdGhpcy4kc3RvcmUuc3RhdGUuY29tbWVudElkOwogICAgICAgIGdldER5bmFtaWNDb20odGhpcy5jb21pZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmNvbUxlbmd0aCA9ICLor4TorrooIiArIHJlcy5kYXRhLnRvdGFsICsgIikiOwogICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlcy5kYXRhLmhvdENvbW1lbnRzKSB7CiAgICAgICAgICAgIHRoaXMuY29tSG90LnB1c2goewogICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudCwgLy8g6K+E6K665YaF5a65CiAgICAgICAgICAgICAgbGlrZWRDb3VudDogaXRlbS5saWtlZENvdW50LCAvLyDngrnotZ7mlbAKICAgICAgICAgICAgICBjb21tZW50SWQ6IGl0ZW0uY29tbWVudElkLCAvLyDor4TorrppZAogICAgICAgICAgICAgIHRpbWU6IGl0ZW0udGltZSwgLy8g5Y+R5biD5pe26Ze0CiAgICAgICAgICAgICAgbmlja25hbWU6IGl0ZW0udXNlci5uaWNrbmFtZSwgLy8g55So5oi35ZCNCiAgICAgICAgICAgICAgdXNlcklkOiBpdGVtLnVzZXIudXNlcklkLCAvLyDnlKjmiLdpZAogICAgICAgICAgICAgIGF2YXRhclVybDogaXRlbS51c2VyLmF2YXRhclVybCwgLy8g55So5oi35aS05YOPCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXMuZGF0YS5jb21tZW50cykgewogICAgICAgICAgICB0aGlzLmNvbUxpc3QucHVzaCh7CiAgICAgICAgICAgICAgY29udGVudDogaXRlbS5jb250ZW50LCAvLyDor4TorrrlhoXlrrkKICAgICAgICAgICAgICBsaWtlZENvdW50OiBpdGVtLmxpa2VkQ291bnQsIC8vIOeCuei1nuaVsAogICAgICAgICAgICAgIGNvbW1lbnRJZDogaXRlbS5jb21tZW50SWQsIC8vIOivhOiuumlkCiAgICAgICAgICAgICAgdGltZTogaXRlbS50aW1lLCAvLyDlj5HluIPml7bpl7QKICAgICAgICAgICAgICBuaWNrbmFtZTogaXRlbS51c2VyLm5pY2tuYW1lLCAvLyDnlKjmiLflkI0KICAgICAgICAgICAgICB1c2VySWQ6IGl0ZW0udXNlci51c2VySWQsIC8vIOeUqOaIt2lkCiAgICAgICAgICAgICAgYXZhdGFyVXJsOiBpdGVtLnVzZXIuYXZhdGFyVXJsLCAvLyDnlKjmiLflpLTlg48KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmlzU2hvd05hdiA9IGZhbHNlOyAvLyDpmpDol4/lupXpg6jmkq3mlL7moI8KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5pc1Nob3dOYXYgPSB0cnVlOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["CommentBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentBox.vue","sourceRoot":"src/components/context/commentBox","sourcesContent":["<template>\n  <van-action-sheet\n    v-model=\"show\"\n    :title=\"comLength\"\n    :lock-scroll=\"false\"\n    class=\"commentDetail\"\n  >\n    <div class=\"content\" v-if=\"comHot.length !== 0 || comList.length !== 0\">\n      <div class=\"topComment\" v-if=\"comHot.length !== 0\">\n        <div class=\"perCom\">精彩评论</div>\n        <div class=\"commentItem\" v-for=\"(item, index) in comHot\" :key=\"index\">\n          <div class=\"left\">\n            <img @click.stop=\"profile(item.userId)\" :src=\"item.avatarUrl\" alt=\"\" />\n          </div>\n          <div class=\"right\">\n            <div class=\"top\">\n              <div class=\"uDetail\">\n                <div @click.stop=\"profile(item.userId)\" class=\"name\">\n                  {{ item.nickname }}\n                </div>\n                <div class=\"time\">{{ item.time | getTime }}</div>\n              </div>\n              <div class=\"like\">\n                {{ item.likedCount }}\n                <img src=\"~assets/img/commentList/zan.svg\" alt=\"\" srcset=\"\" />\n              </div>\n            </div>\n            <div class=\"bottom\">\n              {{ item.content }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"commentList\">\n        <div class=\"perCom\">最新评论</div>\n        <div class=\"commentItem\" v-for=\"(item, index) in comList\" :key=\"index\">\n          <div class=\"left\">\n            <img @click.stop=\"profile(item.userId)\" :src=\"item.avatarUrl\" alt=\"\" />\n          </div>\n          <div class=\"right\">\n            <div class=\"top\">\n              <div class=\"uDetail\">\n                <div @click.stop=\"profile(item.userId)\" class=\"name\">\n                  {{ item.nickname }}\n                </div>\n                <div class=\"time\">{{ item.time | getTime }}</div>\n              </div>\n              <div class=\"like\">\n                {{ item.likedCount }}\n                <img src=\"~assets/img/commentList/zan.svg\" alt=\"\" srcset=\"\" />\n              </div>\n            </div>\n            <div class=\"bottom\">\n              {{ item.content }}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else class=\"noComment\">动态还没有评论哦~</div>\n    <send-comment\n      @successComment=\"successComment\"\n      :type=\"type\"\n      :isDynamic='true'\n      :id=\"$store.state.commentId\"\n      class=\"SendComment\"\n    ></send-comment>\n  </van-action-sheet>\n</template>\n\n<script>\nimport { getDynamicCom } from \"network/dynamic\";\nimport sendComment from \"components/context/sendComment/SendComment\"; // 发送评论\n\nexport default {\n  name: \"CommentBox\",\n  props: [\"isShow\", \"commentId\"],\n  data() {\n    return {\n      show: false,\n      cthreadId: 0,\n      comLength: \"\",\n      comHot: [], // 热评数组\n      comList: [], // 普通评论数组\n      type: 6, // 评论类型\n    };\n  },\n  methods: {\n    // 跳转路由\n    profile(id) {\n      this.$router.push(\"/Information/\" + id);\n      this.$store.state.toggleInformation = 1;\n    },\n\n    successComment(commentDetail) {\n      this.comList.unshift({\n        content: commentDetail.content, // 评论内容\n        likedCount: 0, // 喜欢数量\n        time: commentDetail.time, // 发布时间戳\n        avatarUrl: commentDetail.avatarUrl, // 用户头像\n        nickname: commentDetail.nickname, // 用户昵称\n        userId: commentDetail.id, // 用户id\n      });\n    },\n  },\n  components: {\n    sendComment,\n  },\n  watch: {\n    show() {\n      if (this.show) {\n        this.$loading.loadingShow();\n        this.comid = this.$store.state.commentId;\n        getDynamicCom(this.comid).then((res) => {\n          this.comLength = \"评论(\" + res.data.total + \")\";\n          for (const item of res.data.hotComments) {\n            this.comHot.push({\n              content: item.content, // 评论内容\n              likedCount: item.likedCount, // 点赞数\n              commentId: item.commentId, // 评论id\n              time: item.time, // 发布时间\n              nickname: item.user.nickname, // 用户名\n              userId: item.user.userId, // 用户id\n              avatarUrl: item.user.avatarUrl, // 用户头像\n            });\n          }\n\n          for (const item of res.data.comments) {\n            this.comList.push({\n              content: item.content, // 评论内容\n              likedCount: item.likedCount, // 点赞数\n              commentId: item.commentId, // 评论id\n              time: item.time, // 发布时间\n              nickname: item.user.nickname, // 用户名\n              userId: item.user.userId, // 用户id\n              avatarUrl: item.user.avatarUrl, // 用户头像\n            });\n          }\n          this.$loading.loadingNo();\n        });\n        this.$store.state.isShowNav = false; // 隐藏底部播放栏\n      } else {\n        this.$store.state.isShowNav = true;\n      }\n    },\n  },\n};\n</script>\n<style scoped>\n.SendComment {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 20;\n}\n.CommentBox {\n  position: relative;\n  /* width: 100%;\n  height: 100vh; */\n}\n.commentList {\n  margin-top: 0.266312rem;\n}\n.noComment {\n  height: 13.315579rem;\n  line-height: 13.315579rem;\n  text-align: center;\n  font-size: 0.479361rem;\n  font-weight: 550;\n  color: #9c9c9c;\n}\n.van-action-sheet__header {\n  height: 1.198402rem;\n  line-height: 1.198402rem;\n  box-shadow: 1px 2px 2px rgba(0, 0, 0, 0.116);\n  position: fixed;\n  border-top-left-radius: 0.532623rem;\n  border-top-right-radius: 0.532623rem;\n  z-index: 15;\n  left: 0;\n  right: 0;\n  background-color: #fff;\n}\n.perCom {\n  font-size: 0.399467rem;\n  font-weight: 550;\n  margin-bottom: 0.213049rem;\n}\n.content {\n  padding: 0 0.399467rem 0.399467rem;\n  min-height: 13.315579rem;\n  position: relative;\n  margin: 1.438083rem 0 1.065246rem;\n}\n.commentItem {\n  width: 100%;\n  display: flex;\n  margin-bottom: 0.213049rem;\n}\n.left {\n  flex: 1.5;\n}\n.left img {\n  width: 1.065246rem;\n  height: 1.065246rem;\n  border-radius: 50%;\n}\n.right {\n  flex: 8.5;\n  padding-bottom: 0.266312rem;\n  border-bottom: 1px solid #e9e9e9;\n  /* border-image: linear-gradient(#fff, #000); */\n}\n.top {\n  width: 100%;\n  height: 1.065246rem;\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n.name {\n  font-size: 0.346205rem;\n  height: 0.399467rem;\n  line-height: 0.399467rem;\n}\n.time {\n  font-size: 0.319574rem;\n  height: 0.399467rem;\n  line-height: 0.399467rem;\n  color: rgb(156, 156, 156);\n}\n.like {\n  font-size: 0.346205rem;\n  position: absolute;\n  right: 0;\n  color: rgb(161, 161, 161);\n}\n.like img {\n  width: 0.372836rem;\n  margin-left: 0.133156rem;\n}\n.bottom {\n  font-size: 0.372836rem;\n  margin-top: 0.213049rem;\n}\n</style>"]}]}