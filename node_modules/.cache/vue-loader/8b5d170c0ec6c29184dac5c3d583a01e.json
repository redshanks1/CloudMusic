{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\information\\childrenComps\\dynamic.vue?vue&type=style&index=0&id=208ac868&scoped=true&lang=css&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\information\\childrenComps\\dynamic.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmR5bmFtaWMgewogIHdpZHRoOiAxMDAlOwogIHBhZGRpbmc6IDAgMTVweCAxNXB4OwogIG1hcmdpbi1ib3R0b206IDEuMTk4NDAycmVtOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouZXZlbnRCb3ggewogIHBhZGRpbmctYm90dG9tOiAwLjI2NjMxMnJlbTsKfQoubm9FdmVudCB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiA3Ljk4OTM0OHJlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbGluZS1oZWlnaHQ6IDcuOTg5MzQ4cmVtOwogIGNvbG9yOiAjOGI4YjhiOwogIGZvbnQtc2l6ZTogMC4zOTk0NjdyZW07Cn0K"},{"version":3,"sources":["dynamic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"dynamic.vue","sourceRoot":"src/views/information/childrenComps","sourcesContent":["<template>\n  <div class=\"dynamic\" v-if=\"eventList.length !== 0\">\n    <div class=\"eventBox\" v-for=\"(item, index) in eventList\" :key=\"index\">\n      <!-- 歌曲分享组件 -->\n      <music-dynamic\n        v-if=\"item.type === 18\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></music-dynamic>\n\n      <!-- 评论分享组件 -->\n      <comment-dynamic\n        v-if=\"item.type === 31\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></comment-dynamic>\n\n      <!-- 歌单分享组件 -->\n      <sheet-dynamic\n        v-if=\"item.type === 13\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></sheet-dynamic>\n\n      <!-- 节目分享组件 -->\n      <program-dynamic\n        v-if=\"item.type === 17\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></program-dynamic>\n\n      <!-- 视频分享组件 -->\n      <video-dynamic\n        v-if=\"item.type === 41\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></video-dynamic>\n\n      <!-- 发布视频 -->\n      <relvideo-dynamic\n        v-if=\"item.type === 39\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></relvideo-dynamic>\n\n      <!-- 专栏文章 -->\n      <article-dynamic\n        v-if=\"item.type === 24\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n      ></article-dynamic>\n\n      <!-- 分享动态 -->\n      <life-dynamic\n        v-if=\"item.type === 35\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n        :pics=\"item.pics\"\n      ></life-dynamic>\n\n      <!-- mv分享 -->\n      <mv-dynamic\n        v-if=\"item.type === 21\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n        :pics=\"item.pics\"\n      ></mv-dynamic>\n\n      <!-- 转发 -->\n      <forward-dynamic\n        v-if=\"item.type === 22\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n        :pics=\"item.pics\"\n      ></forward-dynamic>\n\n      <!-- 电台分享 -->\n      <djradio-dynamic\n        v-if=\"item.type === 28\"\n        :threadId=\"item.threadId\"  \n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n        :pics=\"item.pics\"\n      ></djradio-dynamic>\n\n      <!-- 专辑分享 -->\n      <album-dynamic\n        v-if=\"item.type === 19\"\n        :threadId=\"item.threadId\"\n        :commentLength=\"item.commentLength\"\n        :likedCount=\"item.likedCount\"\n        :shareCount=\"item.shareCount\"\n        :events=\"item.events\"\n        :time=\"item.eventTime\"\n        :userImg=\"userImg\"\n        :nickName=\"nickName\"\n        :pics=\"item.pics\"\n      ></album-dynamic>\n    </div>\n  </div>\n  <div v-else class=\"noEvent\">暂时还没有动态哦</div>\n</template>\n\n<script>\nimport { getUserEvent } from \"network/user\";\n\n// 分享组件\nimport musicDynamic from \"./musicDynamic\"; // 音乐\nimport commentDynamic from \"./commentDynamic\"; // 评论\nimport sheetDynamic from \"./sheetDynamic\"; // 歌单\nimport programDynamic from \"./programDynamic\"; // 节目\nimport videoDynamic from \"./videoDynamic\"; // 视频\nimport relvideoDynamic from \"./relvideoDynamic\"; // 发布视频\nimport articleDynamic from \"./articleDynamic\"; // 专栏文章\nimport lifeDynamic from \"./lifeDynamic\"; // 动态\nimport mvDynamic from \"./mvDynamic\"; // mv\nimport forwardDynamic from \"./forwardDynamic\"; // 转发\nimport djradioDynamic from \"./djradioDynamic\"; // 电台\nimport albumDynamic from \"./albumDynamic\"; // 专辑\n\nexport default {\n  props: [\"userImg\", \"nickName\"],\n  name: \"dynamic\",\n  data() {\n    return {\n      eventList: [], // 动态数组\n      lastTime: -1, // 分页参数\n      moreEvent: true, // 是否有更多动态数据\n    };\n  },\n  beforeRouteUpdate(to, from, next) {\n    if (to.fullPath != from.fullPath) {\n      this.eventList = []; // 清空mv数据\n      next();\n      this.UserEvent()\n    }\n  },\n  components: {\n    musicDynamic,\n    commentDynamic,\n    sheetDynamic,\n    programDynamic,\n    videoDynamic,\n    relvideoDynamic,\n    articleDynamic,\n    lifeDynamic,\n    mvDynamic,\n    forwardDynamic,\n    djradioDynamic,\n    albumDynamic,\n  },\n  methods: {\n    UserEvent() {\n      if (this.moreEvent) {\n        getUserEvent(this.$route.params.uid, 30, this.lastTime).then((res) => {\n          for (const item of res.data.events) {\n            // 18 分享单曲\n            // 19 分享专辑\n            // 17 分享电台节目\n            // 28 分享电台\n            // 22 转发\n            // 39 发布视频\n            // 13 分享歌单\n            // 35 动态\n            // 24 分享专栏文章\n            // 41、21 分享视频 / mv\n            // 31 分享评论\n            this.eventList.push({\n              events: JSON.parse(item.json),\n              type: item.type, // 分享类型\n              eventTime: item.eventTime, // 发表时间\n              commentLength: item.info.commentCount, // 评论数量\n              likedCount: item.info.likedCount, // 点赞数量\n              shareCount: item.info.shareCount, // 分享数量\n              pics: item.pics, // 图片数组\n              threadId: item.info.commentThread.id,  // 动态评论id\n            });\n          }\n          this.lastTime = res.data.lasttime; // 保存请求到的分页参数\n          this.moreEvent = res.data.more; // 布尔值 决定是否有更多数据\n        });\n      } else {\n        this.$toast.show(\"没有更多动态了~\", 1900);\n      }\n    },\n\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.UserEvent();\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    this.$loading.loadingShow();\n    this.UserEvent();\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.$loading.loadingNo();\n      window.addEventListener(\"scroll\", this.linearScroll);\n    });\n  },\n  // 销毁组件\n  destroyed: function () {\n    // 离开页面清除（移除）滚轮滚动事件\n    window.removeEventListener(\"scroll\", this.linearScroll);\n  },\n};\n</script>\n<style scoped>\n.dynamic {\n  width: 100%;\n  padding: 0 15px 15px;\n  margin-bottom: 1.198402rem;\n  position: relative;\n}\n.eventBox {\n  padding-bottom: 0.266312rem;\n}\n.noEvent {\n  width: 100%;\n  height: 7.989348rem;\n  text-align: center;\n  line-height: 7.989348rem;\n  color: #8b8b8b;\n  font-size: 0.399467rem;\n}\n</style>"]}]}