{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\cloudVillage\\childrenComps\\Hotcomment.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\cloudVillage\\childrenComps\\Hotcomment.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb21tZW50TGlzdCBmcm9tICJjb21wb25lbnRzL2NvbnRleHQvY29tbWVudExpc3QvQ29tbWVudExpc3QiOwppbXBvcnQgeyBnZXRIb3R3YWxsLCBnZXRDb21tZW50Rmxvb3IgfSBmcm9tICJuZXR3b3JrL2Nsb3VkVmlsbGFnZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG90Y29tbWVudCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICB0aW1lOiAwLCAvLyDliIbpobXlj4LmlbAKICAgICAgY29tTGVuZ3RoOiAiIiwKICAgICAgY29tbWVudExpc3Q6IFtdLAogICAgICB0aHJlYWRJZDogMCwgLy8g6K+E6K66aWQKICAgICAgc29uZ0lkOiAwLCAvLyDotYTmupBpZAogICAgICBoYXNNb3JlOiB0cnVlLCAvLyDmm7TlpJror4TorroKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgZ2V0SG90d2FsbCh0aGlzLiRzdG9yZS5zdGF0ZS5jb29raWUpLnRoZW4oKHJlcykgPT4gewogICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEuZGF0YSkgewogICAgICAgIHRoaXMubGlzdC5wdXNoKHsKICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgbGlrZWRDb3VudDogaXRlbS5saWtlZENvdW50IDwgMTAwMCA/IGl0ZW0ubGlrZWRDb3VudCA6ICI5OTkrIiwgLy8g54K56LWe5pWwCiAgICAgICAgICByZXBseUNvdW50OiBpdGVtLnJlcGx5Q291bnQgPCAxMDAwID8gaXRlbS5yZXBseUNvdW50IDogIjk5OSsiLCAvLyDor4TorrrmlbAKICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudCwgLy8g6K+E6K665YaF5a65CiAgICAgICAgICB0aHJlYWRJZDogaXRlbS50aHJlYWRJZCwgLy8g6K+E6K66aWQKICAgICAgICAgIHRpbWU6IGl0ZW0udGltZSwgLy8g5Y+R5biD5pe26Ze0CiAgICAgICAgICBzb25nTmFtZTogaXRlbS5zaW1wbGVSZXNvdXJjZUluZm8ubmFtZSwgLy8g5q2M5puy5ZCN56ewCiAgICAgICAgICBzaW5nZXJzOiBpdGVtLnNpbXBsZVJlc291cmNlSW5mby5hcnRpc3RzLCAvLyDmrYzmiYvlkI3np7AKICAgICAgICAgIHNvbmdDb3ZlclVybDogaXRlbS5zaW1wbGVSZXNvdXJjZUluZm8uc29uZ0NvdmVyVXJsLCAvLyDmrYzmm7LlsIHpnaIKICAgICAgICAgIHNvbmdJZDogaXRlbS5zaW1wbGVSZXNvdXJjZUluZm8uc29uZ0lkLCAvLyDmrYzmm7JpZAogICAgICAgICAgYXZhdGFyOiBpdGVtLnNpbXBsZVVzZXJJbmZvLmF2YXRhciwgLy8g55So5oi35aS05YOPCiAgICAgICAgICBuaWNrbmFtZTogaXRlbS5zaW1wbGVVc2VySW5mby5uaWNrbmFtZSwgLy8g55So5oi35pi156ewCiAgICAgICAgICB1c2VySWQ6IGl0ZW0uc2ltcGxlVXNlckluZm8udXNlcklkLCAvLyDnlKjmiLdpZAogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWKoOi9veivhOiuugogICAgbG9hZGluZ0NvbW1lbnQoKSB7CiAgICAgIHRoaXMuQ29tbWVudEZsb29yKHRoaXMudGhyZWFkSWQsIHRoaXMuc29uZ0lkKTsKICAgIH0sCgogICAgLy8g6Lev55Sx6Lez6L2sCiAgICB0b011c2ljKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcGxheVNvbmcvIiArIGlkKTsKICAgIH0sCgogICAgdG9Vc2VyKGlkKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvSW5mb3JtYXRpb24vIiArIGlkKTsKICAgIH0sCgogICAgLy8g6I635Y+W6K+E6K66CiAgICBDb21tZW50Rmxvb3IodGhyZWFkSWQsIHNvbmdJZCkgewogICAgICB0aGlzLnNvbmdJZCA9IHNvbmdJZDsKICAgICAgdGhpcy4kcmVmcy5saXN0U2hvdy50b2dnbGUoKTsKICAgICAgaWYgKHRoaXMudGhyZWFkSWQgIT09IHRocmVhZElkKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUudGhyZWFkSWQgPSB0aHJlYWRJZDsgLy8g6K+E6K66aWQKICAgICAgICAKICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS50eXBlSWQgPSBzb25nSWQ7IC8vIOi1hOa6kGlkCiAgICAgICAgdGhpcy5jb21tZW50TGlzdCA9IFtdOyAvLyDmuIXnqbrmlbDnu4QKICAgICAgICB0aGlzLnRpbWUgPSAwOyAvLyDmuIXnqbrliIbpobXlj4LmlbAKICAgICAgICBnZXRDb21tZW50Rmxvb3IodGhyZWFkSWQsIHNvbmdJZCwgMCwgNTAsIHRoaXMudGltZSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEuZGF0YS5jb21tZW50cykgewogICAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0LnB1c2goewogICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudCwKICAgICAgICAgICAgICBhdmF0YXJVcmw6IGl0ZW0udXNlci5hdmF0YXJVcmwsCiAgICAgICAgICAgICAgdXNlcklkOiBpdGVtLnVzZXIudXNlcklkLAogICAgICAgICAgICAgIG5pY2tuYW1lOiBpdGVtLnVzZXIubmlja25hbWUsCiAgICAgICAgICAgICAgdGltZTogaXRlbS50aW1lLAogICAgICAgICAgICAgIGxpa2VkQ291bnQ6IGl0ZW0ubGlrZWRDb3VudCwKICAgICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5jb21MZW5ndGggPSAi6K+E6K66KCIgKyByZXMuZGF0YS5kYXRhLnRvdGFsQ291bnQgKyAiKSI7CiAgICAgICAgICB0aGlzLnRpbWUgPSByZXMuZGF0YS5kYXRhLnRpbWU7IC8vIOWIhumhteWPguaVsAogICAgICAgICAgdGhpcy5oYXNNb3JlID0gcmVzLmRhdGEuZGF0YS5oYXNNb3JlOyAvLyDmm7TlpJrmlbDmja4KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5oYXNNb3JlKSB7CiAgICAgICAgICBnZXRDb21tZW50Rmxvb3IodGhyZWFkSWQsIHNvbmdJZCwgMCwgNTAsIHRoaXMudGltZSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXMuZGF0YS5kYXRhLmNvbW1lbnRzKSB7CiAgICAgICAgICAgICAgdGhpcy5jb21tZW50TGlzdC5wdXNoKHsKICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGl0ZW0uY29udGVudCwKICAgICAgICAgICAgICAgIGF2YXRhclVybDogaXRlbS51c2VyLmF2YXRhclVybCwKICAgICAgICAgICAgICAgIHVzZXJJZDogaXRlbS51c2VyLnVzZXJJZCwKICAgICAgICAgICAgICAgIG5pY2tuYW1lOiBpdGVtLnVzZXIubmlja25hbWUsCiAgICAgICAgICAgICAgICB0aW1lOiBpdGVtLnRpbWUsCiAgICAgICAgICAgICAgICBsaWtlZENvdW50OiBpdGVtLmxpa2VkQ291bnQsCiAgICAgICAgICAgICAgICBjb250ZW50OiBpdGVtLmNvbnRlbnQsCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lID0gcmVzLmRhdGEuZGF0YS50aW1lOyAvLyDliIbpobXlj4LmlbAKICAgICAgICAgICAgdGhpcy5oYXNNb3JlID0gcmVzLmRhdGEuZGF0YS5oYXNNb3JlOyAvLyDmm7TlpJrmlbDmja4KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiR0b2FzdC5zaG93KCLmsqHmnInmm7TlpJrkuoY6KCIsIDE5MDApOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnRocmVhZElkID0gdGhyZWFkSWQ7CiAgICB9LAogIH0sCiAgY29tcG9uZW50czogewogICAgY29tbWVudExpc3QsCiAgfSwKfTsK"},{"version":3,"sources":["Hotcomment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Hotcomment.vue","sourceRoot":"src/views/cloudVillage/childrenComps","sourcesContent":["<template>\n  <div class=\"Hotcomment\">\n    <div\n      class=\"commentBox\"\n      :style=\"{ background: 'url(' + item.songCoverUrl + ')' }\"\n      v-for=\"(item, index) in list\"\n      :key=\"index\"\n    >\n      <div class=\"zhez\"></div>\n      <div class=\"content\">\n        <div class=\"topbox\" @click=\"toUser(item.userId)\">\n          <img :src=\"item.avatar\" alt=\"\" />\n          <span>{{ item.nickname }}</span>\n        </div>\n        <div class=\"fuhao\">“</div>\n        <div class=\"textBox\">{{ item.content }}</div>\n        <div class=\"time\">{{ item.time | getTime(\"YYYY年MM月DD日\") }}</div>\n        <div class=\"music\" @click=\"toMusic(item.songId)\">\n          <img :src=\"item.songCoverUrl\" alt=\"\" />\n          <div class=\"singer\">\n            {{ item.songName }} -\n            <span v-for=\"(singer, index) in item.singers\" :key=\"index\">{{\n              index !== item.singers.length - 1\n                ? singer.name + \" / \"\n                : singer.name\n            }}</span>\n          </div>\n        </div>\n        <div class=\"bottomDetail\">\n          <div class=\"detailbox\">\n            <div class=\"like\">\n              <img src=\"~assets/img/cloudVillage/dianzan.svg\" alt=\"\" />\n              <span>{{ item.likedCount }}</span>\n            </div>\n            <div class=\"like\" @click=\"CommentFloor(item.id, item.songId)\">\n              <img src=\"~assets/img/cloudVillage/pinglun.svg\" alt=\"\" />\n              <span>{{ item.replyCount }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <comment-list\n      @loadingComment=\"loadingComment\"\n      :comLength=\"comLength\"\n      :isComment=\"true\"\n      :type=\"0\"\n      :t=\"2\"\n      ref=\"listShow\"\n      :comList=\"commentList\"\n    ></comment-list>\n  </div>\n</template>\n\n<script>\nimport commentList from \"components/context/commentList/CommentList\";\nimport { getHotwall, getCommentFloor } from \"network/cloudVillage\";\nexport default {\n  name: \"Hotcomment\",\n  data() {\n    return {\n      list: [],\n      time: 0, // 分页参数\n      comLength: \"\",\n      commentList: [],\n      threadId: 0, // 评论id\n      songId: 0, // 资源id\n      hasMore: true, // 更多评论\n    };\n  },\n  created() {\n    getHotwall(this.$store.state.cookie).then((res) => {\n      for (const item of res.data.data) {\n        this.list.push({\n          id: item.id,\n          likedCount: item.likedCount < 1000 ? item.likedCount : \"999+\", // 点赞数\n          replyCount: item.replyCount < 1000 ? item.replyCount : \"999+\", // 评论数\n          content: item.content, // 评论内容\n          threadId: item.threadId, // 评论id\n          time: item.time, // 发布时间\n          songName: item.simpleResourceInfo.name, // 歌曲名称\n          singers: item.simpleResourceInfo.artists, // 歌手名称\n          songCoverUrl: item.simpleResourceInfo.songCoverUrl, // 歌曲封面\n          songId: item.simpleResourceInfo.songId, // 歌曲id\n          avatar: item.simpleUserInfo.avatar, // 用户头像\n          nickname: item.simpleUserInfo.nickname, // 用户昵称\n          userId: item.simpleUserInfo.userId, // 用户id\n        });\n      }\n    });\n  },\n  methods: {\n    // 加载评论\n    loadingComment() {\n      this.CommentFloor(this.threadId, this.songId);\n    },\n\n    // 路由跳转\n    toMusic(id) {\n      this.$router.push(\"/playSong/\" + id);\n    },\n\n    toUser(id) {\n      this.$router.push(\"/Information/\" + id);\n    },\n\n    // 获取评论\n    CommentFloor(threadId, songId) {\n      this.songId = songId;\n      this.$refs.listShow.toggle();\n      if (this.threadId !== threadId) {\n        this.$store.state.threadId = threadId; // 评论id\n        \n        this.$store.state.typeId = songId; // 资源id\n        this.commentList = []; // 清空数组\n        this.time = 0; // 清空分页参数\n        getCommentFloor(threadId, songId, 0, 50, this.time).then((res) => {\n          for (const item of res.data.data.comments) {\n            this.commentList.push({\n              content: item.content,\n              avatarUrl: item.user.avatarUrl,\n              userId: item.user.userId,\n              nickname: item.user.nickname,\n              time: item.time,\n              likedCount: item.likedCount,\n              content: item.content,\n            });\n          }\n          this.comLength = \"评论(\" + res.data.data.totalCount + \")\";\n          this.time = res.data.data.time; // 分页参数\n          this.hasMore = res.data.data.hasMore; // 更多数据\n        });\n      } else {\n        if (this.hasMore) {\n          getCommentFloor(threadId, songId, 0, 50, this.time).then((res) => {\n            for (const item of res.data.data.comments) {\n              this.commentList.push({\n                content: item.content,\n                avatarUrl: item.user.avatarUrl,\n                userId: item.user.userId,\n                nickname: item.user.nickname,\n                time: item.time,\n                likedCount: item.likedCount,\n                content: item.content,\n              });\n            }\n            this.time = res.data.data.time; // 分页参数\n            this.hasMore = res.data.data.hasMore; // 更多数据\n          });\n        } else {\n          this.$toast.show(\"没有更多了:(\", 1900);\n        }\n      }\n      this.threadId = threadId;\n    },\n  },\n  components: {\n    commentList,\n  },\n};\n</script>\n<style scoped>\n.commentBox {\n  width: 100%;\n  padding: 0.319574rem;\n  margin-bottom: 0.399467rem;\n  position: relative;\n  border-radius: 0.266312rem;\n  overflow: hidden;\n  box-shadow: 0 5px 4px rgba(121, 121, 121, 0.322);\n}\n.topbox {\n  width: 100%;\n  height: 0.798935rem;\n  line-height: 0.798935rem;\n  font-size: 0.346205rem;\n  color: #fff;\n}\n.zhez {\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  z-index: 10;\n  background-color: rgba(0, 0, 0, 0.705);\n}\n.content {\n  position: relative;\n  z-index: 11;\n}\n.topbox img {\n  width: 0.798935rem;\n  height: 0.798935rem;\n  border-radius: 50%;\n  margin-right: 0.186418rem;\n  float: left;\n}\n.fuhao {\n  width: 100%;\n  height: 0.532623rem;\n  font-size: 2.130493rem;\n  line-height: 60px;\n  color: rgb(150, 150, 150);\n  margin: 0.399467rem 0 0.213049rem;\n}\n.textBox {\n  width: 100%;\n  color: #fff;\n  font-size: 0.45273rem;\n  letter-spacing: 1px;\n  line-height: 0.932091rem;\n  font-weight: 550;\n  margin-bottom: 0.213049rem;\n}\n.music {\n  width: 100%;\n  height: 0.798935rem;\n  display: flex;\n  align-items: center;\n  color: #868686;\n  font-size: 0.346205rem;\n}\n.music img {\n  width: 0.798935rem;\n  height: 100%;\n  border-radius: 50%;\n  float: left;\n  margin-right: 0.186418rem;\n}\n.time {\n  width: 100%;\n  height: 0.532623rem;\n  line-height: 0.532623rem;\n  text-align: right;\n  font-size: 0.346205rem;\n  color: #868686;\n  margin-bottom: 0.399467rem;\n}\n.singer {\n  width: 7.456724rem;\n  overflow: hidden;\n  height: 0.798935rem;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  line-height: 0.798935rem;\n}\n.bottomDetail {\n  width: 100%;\n  height: 0.532623rem;\n  margin-top: 0.186418rem;\n}\n.detailbox {\n  width: 50%;\n  height: 100%;\n  float: right;\n}\n.like {\n  width: 50%;\n  height: 100%;\n  float: left;\n  line-height: 0.585885rem;\n  color: #fff;\n  font-size: 0.359521rem;\n}\n.like img {\n  width: 0.505992rem;\n  float: left;\n  margin-right: 0.186418rem;\n}\n</style>"]}]}