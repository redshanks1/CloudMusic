{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\radioStation\\childrenComps\\DetailProgram.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\radioStation\\childrenComps\\DetailProgram.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtc2Nyb2xsIGZyb20gImNvbXBvbmVudHMvY29tbW9uL211aVNjcm9sbC9NdWlTY3JvbGwiOyAvLyDmu5rliqjnu4Tku7YKaW1wb3J0IHsgdG9TdHJpbmdOdW0sIGR1cmF0aW9uVGltZSB9IGZyb20gImNvbW1vbi9jb21tb24iOwppbXBvcnQgeyBnZXREalByb2dyYW0sZ2V0UHJvZ3JhbURldGFpbCB9IGZyb20gIm5ldHdvcmsvcmFkaW9TdGF0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogWyJsb2FkSW5kZXgiXSwKICBuYW1lOiAiRGV0YWlsUHJvZ3JhbSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRvcEltZzogcmVxdWlyZSgiYXNzZXRzL2ltZy9yYWRpb1N0YXRpb24vRGV0YWlsL3NoYW5nLnN2ZyIpLAogICAgICBvZmZzZXQ6IDAsIC8vIOmhteaVsAogICAgICBwcm9ncmFtTGlzdDogW10sIC8vIOiKguebruaVsOaNrgogICAgICBwcm9ncmFtQ291bnQ6IDAsCiAgICAgIHByb2dyYW1MZW5ndGg6IDEsIC8vIOm7mOiupOaVsOe7hOmVv+W6piAg55So5p2l5Yik5pat5piv5ZCm5Y+R6YCB6K+35rGCCiAgICAgIGJvb2w6IHRydWUsCiAgICAgIGFjczogZmFsc2UsIC8vIOWIpOaWreaYr+WQpuaMieaXtumXtOaOkuW6jwogICAgICByZWZyZXNoOiAwLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOi3r+eUsei3s+i9rAogICAgcGxheUF1ZGlvKGlkKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hdWRpb1BsYXkvJyArIGlkKTsKICAgIH0sCgogICAgLy8g5o6S5bqPCiAgICBzb3J0TGlzdCgpIHsKICAgICAgaWYgKHRoaXMuYm9vbCkgewogICAgICAgIHRoaXMudG9wSW1nID0gcmVxdWlyZSgiYXNzZXRzL2ltZy9yYWRpb1N0YXRpb24vRGV0YWlsL3hpYS5zdmciKTsKICAgICAgICB0aGlzLmJvb2wgPSBmYWxzZTsKICAgICAgICB0aGlzLmFjcyA9IHRydWU7ICAvLyB0cnVl6K6+572u5o6S5bqPCiAgICAgICAgdGhpcy5vZmZzZXQgPSAwOyAgLy8g6YeN572u5YGP56e76YePCiAgICAgICAgdGhpcy5wcm9ncmFtTGlzdCA9IFtdOyAgLy8g5riF56m65pWw5o2u5pWw57uECiAgICAgICAgdGhpcy5nZXRQcm9ncmFtKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50b3BJbWcgPSByZXF1aXJlKCJhc3NldHMvaW1nL3JhZGlvU3RhdGlvbi9EZXRhaWwvc2hhbmcuc3ZnIik7CiAgICAgICAgdGhpcy5hY3MgPSBmYWxzZTsgIC8vIHRydWXorr7nva7mjpLluo8KICAgICAgICB0aGlzLm9mZnNldCA9IDA7ICAvLyDph43nva7lgY/np7vph48KICAgICAgICB0aGlzLnByb2dyYW1MaXN0ID0gW107ICAvLyDmuIXnqbrmlbDmja7mlbDnu4QKICAgICAgICB0aGlzLmdldFByb2dyYW0oKTsKICAgICAgICB0aGlzLmJvb2wgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIC8vIOiOt+WPluiKguebruWIl+ihqAogICAgZ2V0UHJvZ3JhbSgpIHsKICAgICAgaWYgKHRoaXMucHJvZ3JhbUxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdTaG93KCk7CiAgICAgICAgZ2V0RGpQcm9ncmFtKHRoaXMuJHJvdXRlLnBhcmFtcy5yaWQsIDgwLCB0aGlzLm9mZnNldCAqIDgwLHRoaXMuYWNzKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMucHJvZ3JhbUNvdW50ID0gcmVzLmRhdGEuY291bnQ7CiAgICAgICAgICB0aGlzLnByb2dyYW1MZW5ndGggPSByZXMuZGF0YS5wcm9ncmFtcy5sZW5ndGg7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEucHJvZ3JhbXMpIHsKICAgICAgICAgICAgdGhpcy5wcm9ncmFtTGlzdC5wdXNoKHsKICAgICAgICAgICAgICBwcm9ncmFtTnVtOiBpdGVtLnNlcmlhbE51bSwgLy8g6IqC55uu5pyf5pWwCiAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLCAvLyDoioLnm67lkI3np7AKICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBpdGVtLmNyZWF0ZVRpbWUsIC8vIOWPkeW4g+aXtumXtAogICAgICAgICAgICAgIGxpc3RlbmVyQ291bnQ6IHRvU3RyaW5nTnVtKGl0ZW0ubGlzdGVuZXJDb3VudCksIC8vIOaSreaUvuaVsOmHjwogICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblRpbWUoaXRlbS5kdXJhdGlvbiksIC8vIOiKguebruaXtumVvwogICAgICAgICAgICAgIGlkOiBpdGVtLmlkLCAvLyDoioLnm65pZAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMub2Zmc2V0Kys7CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGluZGV4KCkgewogICAgICByZXR1cm4gdGhpcy5sb2FkSW5kZXg7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGluZGV4KCkgewogICAgICAvLyDkuIvmi4nliqDovb0KICAgICAgdGhpcy5nZXRQcm9ncmFtKCk7CiAgICB9LAogIH0sCiAgYmVmb3JlUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpIHsKICAgIGlmICh0by5mdWxsUGF0aCAhPSBmcm9tLmZ1bGxQYXRoKSB7CiAgICAgIHRoaXMucHJvZ3JhbUxpc3QgPSBbXTsgLy8g5riF56m6bXbmlbDmja4KICAgICAgdGhpcy5vZmZzZXQgPSAwCiAgICAgIG5leHQoKTsKICAgICAgdGhpcy5nZXRQcm9ncmFtKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRQcm9ncmFtKCk7CiAgICAvLyBnZXRQcm9ncmFtRGV0YWlsKHRoaXMuJHJvdXRlLnBhcmFtcy5yaWQpLnRoZW4ocmVzID0+IHsKICAgIC8vICAgY29uc29sZS5sb2cocmVzKTsKICAgIC8vIH0pCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBtc2Nyb2xsLAogIH0sCn07Cg=="},{"version":3,"sources":["DetailProgram.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailProgram.vue","sourceRoot":"src/views/radioStation/childrenComps","sourcesContent":["<template>\n  <div class=\"DetailProgram\">\n    <div class=\"top\">\n      <span class=\"left\">共{{ programCount }}期</span>\n      <span class=\"right\" @click=\"sortList\">\n        <img :src=\"topImg\" alt=\"\" />\n        排序\n      </span>\n    </div>\n    <div class=\"content\" key=\"refresh\">\n      <div class=\"item\" @click=\"playAudio(item.id)\" v-for=\"(item, index) in programList\" :key=\"index\">\n        <div class=\"box1\">{{ item.programNum }}</div>\n        <div class=\"box2\">\n          <div class=\"title\">{{ item.name }}</div>\n          <div class=\"detail\">\n            <span class=\"time\">{{ item.createTime | getTime }}</span>\n            <span class=\"playCount\">▷ {{ item.listenerCount }}</span>\n            <span class=\"duration\">\n              <img src=\"~assets/img/radioStation/Detail/sz.svg\" alt=\"\" />\n              {{ item.duration }}\n            </span>\n          </div>\n        </div>\n        <div class=\"box3\">\n          <img src=\"~assets/img/common/sandian.svg\" alt=\"\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport mscroll from \"components/common/muiScroll/MuiScroll\"; // 滚动组件\nimport { toStringNum, durationTime } from \"common/common\";\nimport { getDjProgram,getProgramDetail } from \"network/radioStation\";\n\nexport default {\n  props: [\"loadIndex\"],\n  name: \"DetailProgram\",\n  data() {\n    return {\n      topImg: require(\"assets/img/radioStation/Detail/shang.svg\"),\n      offset: 0, // 页数\n      programList: [], // 节目数据\n      programCount: 0,\n      programLength: 1, // 默认数组长度  用来判断是否发送请求\n      bool: true,\n      acs: false, // 判断是否按时间排序\n      refresh: 0,\n    };\n  },\n  methods: {\n    // 路由跳转\n    playAudio(id){\n      this.$router.push('/audioPlay/' + id);\n    },\n\n    // 排序\n    sortList() {\n      if (this.bool) {\n        this.topImg = require(\"assets/img/radioStation/Detail/xia.svg\");\n        this.bool = false;\n        this.acs = true;  // true设置排序\n        this.offset = 0;  // 重置偏移量\n        this.programList = [];  // 清空数据数组\n        this.getProgram();\n      } else {\n        this.topImg = require(\"assets/img/radioStation/Detail/shang.svg\");\n        this.acs = false;  // true设置排序\n        this.offset = 0;  // 重置偏移量\n        this.programList = [];  // 清空数据数组\n        this.getProgram();\n        this.bool = true;\n      }\n    },\n\n    // 获取节目列表\n    getProgram() {\n      if (this.programLength > 0) {\n        this.$loading.loadingShow();\n        getDjProgram(this.$route.params.rid, 80, this.offset * 80,this.acs).then((res) => {\n          this.programCount = res.data.count;\n          this.programLength = res.data.programs.length;\n          for (const item of res.data.programs) {\n            this.programList.push({\n              programNum: item.serialNum, // 节目期数\n              name: item.name, // 节目名称\n              createTime: item.createTime, // 发布时间\n              listenerCount: toStringNum(item.listenerCount), // 播放数量\n              duration: durationTime(item.duration), // 节目时长\n              id: item.id, // 节目id\n            });\n          }\n          this.offset++;\n          this.$loading.loadingNo();\n        });\n      }\n    },\n  },\n  computed: {\n    index() {\n      return this.loadIndex;\n    },\n  },\n  watch: {\n    index() {\n      // 下拉加载\n      this.getProgram();\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    if (to.fullPath != from.fullPath) {\n      this.programList = []; // 清空mv数据\n      this.offset = 0\n      next();\n      this.getProgram();\n    }\n  },\n  created() {\n    this.getProgram();\n    // getProgramDetail(this.$route.params.rid).then(res => {\n    //   console.log(res);\n    // })\n  },\n  components: {\n    mscroll,\n  },\n};\n</script>\n<style scoped>\n.DetailProgram {\n  width: 100%;\n}\n.top {\n  width: 100%;\n  height: 25px;\n  line-height: 25px;\n  font-size: 13px;\n}\n.right {\n  float: right;\n}\n.right img {\n  position: relative;\n  top: 3px;\n}\n.item {\n  display: flex;\n  width: 100%;\n  height: 40px;\n  margin-bottom: 10px;\n}\n.box1 {\n  flex: 1;\n  line-height: 40px;\n  color: #a8a8a8;\n  font-size: 14px;\n}\n.box2 {\n  flex: 8;\n}\n.box3 {\n  flex: 1;\n  text-align: center;\n}\n.box3 img {\n  width: 25px;\n  height: 20px;\n  margin-top: 10px;\n}\n.title {\n  width: 7.456724rem;\n  height: 20px;\n  font-size: 14px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  letter-spacing: 1px;\n}\n.detail {\n  width: 100%;\n  height: 20px;\n  font-size: 12px;\n  color: #a8a8a8;\n}\n.playCount {\n  margin-left: 12px;\n}\n.duration {\n  margin-left: 12px;\n}\n.duration img {\n  width: 13.6px;\n  position: relative;\n  top: 2px;\n}\n</style>"]}]}