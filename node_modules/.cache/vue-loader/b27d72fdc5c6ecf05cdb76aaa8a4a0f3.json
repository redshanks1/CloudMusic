{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreSheet.vue?vue&type=style&index=0&id=427b4558&scoped=true&lang=css&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreSheet.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zbmF2IHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiA0NHB4OwogIHotaW5kZXg6IDEwOwogIC8qIG1hcmdpbi10b3A6IDQ0cHg7ICovCn0KLm5hdiB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHJpZ2h0OiAwOwp9Ci5tdWktY29udGVudCB7CiAgcG9zaXRpb246IGZpeGVkOwogIHRvcDogMS4xNzE3NzFyZW07CiAgbGVmdDogMDsKICByaWdodDogMDsKICB6LWluZGV4OiAxMDsKfQojc2xpZGVyIHsKICBoZWlnaHQ6IDEuMDkxODc3cmVtOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7Cn0KI3NsaWRlclNlZ21lbnRlZENvbnRyb2wgewogIGhlaWdodDogMTAwJTsKfQoubW9yZVNoZWV0IHsKICB0b3VjaC1hY3Rpb246IG5vbmU7CiAgd2lkdGg6IDEwMCU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQouYWN0aXZlQm9yZGVyIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCByZWQ7Cn0KLmFjdGl2ZSB7CiAgY29sb3I6IHJlZDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCByZWQ7Cn0KLmNvbnRlbnQgewogIHBhZGRpbmc6IDAuMjY2MzEycmVtIDAuMzE5NTc0cmVtOwogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7CiAgZmxleC13cmFwOiB3cmFwOwogIG1hcmdpbjogMi4zOTY4MDRyZW0gMCAxLjMzMTU1OHJlbTsKICBtaW4taGVpZ2h0OiAxMy4zMTU1NzlyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsKfQouc2hlZXRpdGVtIHsKICB3aWR0aDogMzAlOwogIG1hcmdpbi1ib3R0b206IDAuMjY2MzEycmVtOwp9Cg=="},{"version":3,"sources":["moreSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"moreSheet.vue","sourceRoot":"src/views/discover/childrenComps/moreComps","sourcesContent":["<template>\n  <div class=\"moreSheet\">\n    <menu-nav class=\"nav\" :navTitle=\"'歌单广场'\"></menu-nav>\n    <scrollnav\n      class=\"snav\"\n      @tabToggle=\"tabToggle\"\n      :itemList=\"tagsList\"\n      :firstIndex=\"0\"\n    ></scrollnav>\n    <div class=\"content\">\n      <sheet-item\n        class=\"sheetitem\"\n        @click.native=\"toClick(item.id)\"\n        v-for=\"(item, index) in sheetDetail\"\n        :key=\"index\"\n        :sheetItem=\"item\"\n        :isSheet=\"true\"\n      ></sheet-item>\n    </div>\n  </div>\n</template>\n\n<script>\nimport menuNav from \"components/context/menuNav/MenuNav\";\nimport sheetItem from \"components/context/sheetItem/SheetItem\";\nimport scrollnav from \"components/context/scrollNav/ScrollNav\";\nimport mui from \"assets/mui/js/mui.min.js\"; // 引入 mui js 文件\n\nimport { toStringNum } from \"common/common\";\nimport { getHotSheet, getSheetTags } from \"network/discover\";\n\n// 引入滑动模块\n// .mui-scroll-wrapper 表示需要进行滑动的区域\nmui(\".mui-scroll-wrapper\").scroll({\n  deceleration: 0.0005, //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006\n});\n\nexport default {\n  name: \"moreSheet\",\n  data() {\n    return {\n      tagsList: [\"全部\"], // 歌单分类列表\n      aindex: 0,\n      offset: 0,\n      sheetDetail: [], // 歌单信息\n      more: true, // 查看是否更多数据\n      index: 0, // 切换索引\n    };\n  },\n  components: {\n    menuNav,\n    sheetItem,\n    scrollnav,\n  },\n  methods: {\n    tabToggle(index) {\n      if (this.index !== index) {\n        this.sheetDetail = []; // 清空数据\n        this.getSheet(index);\n      }\n      this.index = index;\n    },\n\n    // 歌单详情页跳转\n    toClick(id) {\n      this.$router.push(\"/playDetail/\" + id + \"&\" + false);\n    },\n\n    // 获取歌单\n    getSheet(index) {\n      if (this.more) {\n        getHotSheet(\"hot\", this.tagsList[index], 30, this.offset * 30).then(\n          (res) => {\n            this.more = res.data.more;\n            for (const item of res.data.playlists) {\n              this.sheetDetail.push({\n                id: item.id, // 歌单id\n                rcmdtext: item.name, // 歌单名称\n                picUrl: item.coverImgUrl, // 封面\n                playCount: toStringNum(item.playCount), // 播放量\n              });\n            }\n            this.$loading.loadingNo();\n            this.offset++;\n          }\n        );\n      } else {\n        this.$toast.show(\"没有更多歌单啦\", 1900);\n      }\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.getSheet(this.index);\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    // 标签栏\n    getSheetTags().then((res) => {\n      for (const item of res.data.tags) {\n        this.tagsList.push(item.name);\n      }\n    });\n\n    // 获取全部歌单数据\n    getHotSheet(\"hot\", \"全部\", 30, this.offset * 30).then((res) => {\n      for (const item of res.data.playlists) {\n        this.sheetDetail.push({\n          id: item.id, // 歌单id\n          rcmdtext: item.name, // 歌单名称\n          picUrl: item.coverImgUrl, // 封面\n          playCount: toStringNum(item.playCount), // 播放量\n        });\n      }\n      this.offset++;\n    });\n  },\n  mounted() {\n    mui(\".mui-scroll-wrapper\").scroll({\n      bounce: true, //是否回弹\n      scrollY: false, //是否竖向滚动\n      scrollX: true, //是否横向滚动\n      startX: 0, //初始化时滚动至x\n      startY: 0, //初始化时滚动至y\n      indicators: true, //是否显示滚动条\n    });\n\n    // 绑定滚动事件\n    document.addEventListener(\"scroll\", this.linearScroll);\n  },\n  deactivated () {\n    document.removeEventListener(\"scroll\", this.linearScroll)\n  }\n};\n</script>\n<style scoped>\n.snav {\n  position: fixed;\n  top: 44px;\n  z-index: 10;\n  /* margin-top: 44px; */\n}\n.nav {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n.mui-content {\n  position: fixed;\n  top: 1.171771rem;\n  left: 0;\n  right: 0;\n  z-index: 10;\n}\n#slider {\n  height: 1.091877rem;\n  background-color: #fff;\n}\n#sliderSegmentedControl {\n  height: 100%;\n}\n.moreSheet {\n  touch-action: none;\n  width: 100%;\n  background-color: #fff;\n}\n.activeBorder {\n  box-sizing: border-box;\n  border-bottom: 2px solid red;\n}\n.active {\n  color: red;\n  box-sizing: border-box;\n  border-bottom: 2px solid red;\n}\n.content {\n  padding: 0.266312rem 0.319574rem;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  margin: 2.396804rem 0 1.331558rem;\n  min-height: 13.315579rem;\n  background-color: #fff;\n}\n.sheetitem {\n  width: 30%;\n  margin-bottom: 0.266312rem;\n}\n</style>"]}]}