{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailSongs.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailSongs.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzb25nSXRlbSBmcm9tICJjb21wb25lbnRzL2NvbnRleHQvc29uZ0l0ZW0vU29uZ0l0ZW0iOwppbXBvcnQgeyBzZWFyY2hSZXN1bHQgfSBmcm9tICJuZXR3b3JrL3NlYXJjaCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRldGFpbFNvbmdzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGV0YWlsOiBbXSwKICAgICAgb2Zmc2V0OiAwLAogICAgICByZXN1bHQ6IDEsIC8vIOWIpOaWreaYr+WQpui/mOacieaVsOaNrgogICAgICBrZXl3b3JrczogdGhpcy4kcm91dGUucGFyYW1zLmtleXdvcmRzLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIHNvbmdJdGVtLAogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5pWw5o2uCiAgICBnZXRTZWFyY2hSZXN1bHQoKSB7CiAgICAgIHNlYXJjaFJlc3VsdCh0aGlzLmtleXdvcmtzLCAzMCwgdGhpcy5vZmZzZXQgKiAzMCwgMSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5yZXN1bHQgPSByZXMuZGF0YS5yZXN1bHQuc29uZ3MgfHwgbnVsbDsKICAgICAgICBpZiAodGhpcy5yZXN1bHQgIT09IG51bGwpIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGEucmVzdWx0LnNvbmdzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuZGV0YWlsLnB1c2goewogICAgICAgICAgICAgIGlkOiByZXMuZGF0YS5yZXN1bHQuc29uZ3NbaV0uaWQsCiAgICAgICAgICAgICAgc29uZ05hbWU6IHJlcy5kYXRhLnJlc3VsdC5zb25nc1tpXS5uYW1lLAogICAgICAgICAgICAgIHl1YW5jOiBbXSwKICAgICAgICAgICAgICBzaW5nZXI6IHJlcy5kYXRhLnJlc3VsdC5zb25nc1tpXS5hciwKICAgICAgICAgICAgICB6aHVhbmppOiByZXMuZGF0YS5yZXN1bHQuc29uZ3NbaV0uYWxidW0ubmFtZSwKICAgICAgICAgICAgICBtdjogcmVzLmRhdGEucmVzdWx0LnNvbmdzW2ldLm12aWQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vZmZzZXQrKzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kdG9hc3Quc2hvdygn5rKh5pyJ5pu05aSa5LqGOignLDE5MDApCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLy8g55uR5ZCs5rua5Yqo5LqL5Lu2CiAgICBsaW5lYXJTY3JvbGwoKSB7CiAgICAgIC8vIOa7muWKqOadoei3neemu+mhtumDqOeahOi3neemuwogICAgICBsZXQgc2Nyb2xsVG9wID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAvLyDlj6/op4bljLrnmoTpq5jluqYKICAgICAgbGV0IGNsaWVudEhlaWdodCA9CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgLy8g5rua5Yqo5p2h5Y+v5rua5Yqo55qE6auY5bqmCiAgICAgIGxldCBzY3JvbGxIZWlnaHQgPQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7CiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0IC0gMSkgewogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuZ2V0U2VhcmNoUmVzdWx0KCk7CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0sIDEwMDApOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgIHNlYXJjaFJlc3VsdCh0aGlzLiRyb3V0ZS5wYXJhbXMua2V5d29yZHMsIDQwLCB0aGlzLm9mZnNldCAqIDQwLCAxKS50aGVuKAogICAgICAocmVzKSA9PiB7CiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlcy5kYXRhLnJlc3VsdC5zb25ncykgewogICAgICAgICAgdGhpcy5kZXRhaWwucHVzaCh7CiAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICBzb25nTmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICB5dWFuYzogW10sCiAgICAgICAgICAgIHNpbmdlcjogaXRlbS5hciwKICAgICAgICAgICAgemh1YW5qaTogaXRlbS5hbGJ1bS5uYW1lLAogICAgICAgICAgICBtdjogaXRlbS5tdmlkLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMub2Zmc2V0Kys7CiAgICAgIH0KICAgICk7CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nTm8oKTsKICAgIH0pCiAgfSwKICBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMubGluZWFyU2Nyb2xsKTsKICAgIH0pOwogIH0sCiAgZGVhY3RpdmF0ZWQoKSB7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmxpbmVhclNjcm9sbCk7CiAgfSwKfTsK"},{"version":3,"sources":["DetailSongs.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailSongs.vue","sourceRoot":"src/views/search/childrenComps","sourcesContent":["<template>\n  <div class=\"DetailSongs\">\n    <div class=\"topbox\">\n      <img src=\"~assets/img/played/bofang.svg\" alt=\"\" />\n      播放全部\n    </div>\n    <songItem :songList=\"detail\"></songItem>\n  </div>\n</template>\n\n<script>\nimport songItem from \"components/context/songItem/SongItem\";\nimport { searchResult } from \"network/search\";\n\nexport default {\n  name: \"DetailSongs\",\n  data() {\n    return {\n      detail: [],\n      offset: 0,\n      result: 1, // 判断是否还有数据\n      keyworks: this.$route.params.keywords,\n    };\n  },\n  components: {\n    songItem,\n  },\n  methods: {\n    // 获取数据\n    getSearchResult() {\n      searchResult(this.keyworks, 30, this.offset * 30, 1).then((res) => {\n        this.result = res.data.result.songs || null;\n        if (this.result !== null) {\n          for (let i = 0; i < res.data.result.songs.length; i++) {\n            this.detail.push({\n              id: res.data.result.songs[i].id,\n              songName: res.data.result.songs[i].name,\n              yuanc: [],\n              singer: res.data.result.songs[i].ar,\n              zhuanji: res.data.result.songs[i].album.name,\n              mv: res.data.result.songs[i].mvid,\n            });\n          }\n          this.offset++;\n        } else {\n          this.$toast.show('没有更多了:(',1900)\n        }\n      });\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.getSearchResult();\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    this.$loading.loadingShow();\n    searchResult(this.$route.params.keywords, 40, this.offset * 40, 1).then(\n      (res) => {\n        for (const item of res.data.result.songs) {\n          this.detail.push({\n            id: item.id,\n            songName: item.name,\n            yuanc: [],\n            singer: item.ar,\n            zhuanji: item.album.name,\n            mv: item.mvid,\n          });\n        }\n        this.offset++;\n      }\n    );\n  },\n  mounted () {\n    this.$nextTick(() => {\n      this.$loading.loadingNo();\n    })\n  },\n  activated() {\n    this.$nextTick(() => {\n      document.addEventListener(\"scroll\", this.linearScroll);\n    });\n  },\n  deactivated() {\n    document.removeEventListener(\"scroll\", this.linearScroll);\n  },\n};\n</script>\n<style scoped>\n.DetailSongs {\n  width: 100%;\n  min-height: 13.315579rem;\n}\n.topbox {\n  height: 0.665779rem;\n  line-height: 0.665779rem;\n  font-size: 0.426099rem;\n  margin-bottom: 0.133156rem;\n  margin-top: 2.396804rem;\n}\n.topbox img {\n  float: left;\n  width: 0.639148rem;\n  margin-right: 0.266312rem;\n}\n</style>"]}]}