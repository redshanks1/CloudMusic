{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\components\\common\\lyricList\\LyricList.vue?vue&type=style&index=0&id=b6b20812&scoped=true&lang=css&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\components\\common\\lyricList\\LyricList.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm5vSXRlbSB7CiAgZmxvYXQ6IGxlZnQ7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAwLjU1MzkyOHJlbTsKfQoucGxheWJveCB7CiAgd2lkdGg6IDEwMCU7Cn0KLmxpc3QgewogIHRyYW5zaXRpb246IGFsbCAwLjVzIGxpbmVhcjsKfQouTHlyaWNMaXN0Q29udGVudCB7CiAgd2lkdGg6IDgwJTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdG9wOiAzJTsKICBtYXJnaW46IDAgYXV0bzsKICBoZWlnaHQ6IDkwJTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBmb250LXNpemU6IDE1cHg7CiAgbGV0dGVyLXNwYWNpbmc6IDJweDsKICBjb2xvcjogIzc1NzU3NTsKICAvKiB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoKTsgKi8KICAvKiB0cmFuc2l0aW9uOiA7ICovCn0KLmFjdGl2ZSB7CiAgY29sb3I6ICNmZmY7Cn0KLml0ZW0gewogIG1hcmdpbi10b3A6IDE3cHg7Cn0KLm5vbHlyaWMgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBmb250LXNpemU6IDIwcHg7CiAgY29sb3I6ICNmZmY7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Cg=="},{"version":3,"sources":["LyricList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LyricList.vue","sourceRoot":"src/components/common/lyricList","sourcesContent":["<template>\n  <div class=\"LyricList\">\n    <div class=\"LyricListContent\">\n      <ul ref=\"list\" v-if=\"lyricText.length !== 0\">\n        <li class=\"item\" v-for=\"(item, index) in lyricText\" :key=\"index\">\n          <div\n            :class=\"{ active: index === activeIndex }\"\n            class=\"itemSpan\"\n            v-if=\"item !== '' && item !== '\\n'\"\n          >\n            {{ item }}\n          </div>\n        </li>\n      </ul>\n      <div class=\"nolyric\" v-else>暂时还没有歌词</div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"LyricList\",\n  props: [\"lyricText\", \"songLyric\", \"value\", \"cTime\", \"indexLyric\"],\n  data() {\n    return {\n      activeIndex: 0,\n      valueTime: 0,\n      index: 0,\n      yscroll: 0,\n      zindex: 0,\n      itemSumH: 0,\n      songText: [],\n      songTime: 0, // 歌曲实时时间\n      num: 0,\n    };\n  },\n  methods: {\n    setTime() {\n      console.log(this.$store.state.navMusicDom.currentTime);\n      setTimeout(() => {\n        for (let i = 0; i < this.songLyric.length; i++) {\n          if (\n            this.$store.state.navMusicDom.currentTime >= this.songLyric[i] &&\n            this.$store.state.navMusicDom.currentTime <=\n              this.songLyric[i + 1] &&\n            document.getElementsByClassName(\"itemSpan\")[i].offsetTop >\n              document.getElementsByClassName(\"LyricListContent\")[0]\n                .clientHeight /\n                2\n          ) {\n            console.log(i);\n            let scroll =\n              document.getElementsByClassName(\"itemSpan\")[i].offsetTop -\n              document.getElementsByClassName(\"LyricListContent\")[0]\n                .clientHeight /\n                2;\n            this.yscroll =\n              scroll +\n              document.getElementsByClassName(\"itemSpan\")[i].clientHeight /\n                2;\n            this.$refs.list.style.transform =\n              \"translateY(\" + -this.yscroll + \"px)\";\n            this.activeIndex = i;\n            this.index = i;\n            this.zindex = i;\n          } else if (\n            this.$store.state.navMusicDom.currentTime >= this.songLyric[i] &&\n            this.$store.state.navMusicDom.currentTime <=\n              this.songLyric[i + 1] &&\n            document.getElementsByClassName(\"itemSpan\")[i].offsetTop <\n              document.getElementsByClassName(\"LyricListContent\")[0]\n                .clientHeight /\n                2\n          ) {\n            console.log(i);\n            this.activeIndex = i;\n            this.index = i;\n            this.zindex = i;\n          }\n        }\n      }, 1000);\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.setTime();\n      this.$store.state.navMusicDom.addEventListener(\"timeupdate\", () => {\n        // 判断有没有歌词\n        if (this.lyricText.length !== 0) {\n          // 判断歌曲时间在歌词区间\n          if (\n            this.$store.state.navMusicDom.currentTime >=\n              this.songLyric[this.index] &&\n            this.$store.state.navMusicDom.currentTime <=\n              this.songLyric[this.index + 1]\n          ) {\n            var huiche = /^\\n/; // 正则匹配回车符\n            if (huiche.test(this.lyricText[this.index])) {\n            } else {\n              if (document.getElementsByClassName(\"active\")[0] !== undefined) {\n                if (\n                  document.getElementsByClassName(\"itemSpan\")[this.zindex]\n                    .offsetTop >\n                  document.getElementsByClassName(\"LyricListContent\")[0]\n                    .clientHeight /\n                    2\n                ) {\n                  console.log();\n                  this.yscroll =\n                    document.getElementsByClassName(\"itemSpan\")[this.zindex]\n                      .offsetTop -\n                    document.getElementsByClassName(\"LyricListContent\")[0]\n                      .clientHeight /\n                      2 +\n                    document.getElementsByClassName(\"itemSpan\")[this.zindex]\n                      .clientHeight /\n                      2;\n                  this.$refs.list.style.transform =\n                    \"translateY(\" + -this.yscroll + \"px)\";\n                  this.$refs.list.style.transition = \"0.3s linear\";\n                }\n              }\n              this.zindex++;\n            }\n            this.index++; // 索引++\n            this.activeIndex++; // 歌词索引++\n          }\n        }\n      });\n\n      // 添加 seeked 事件，当进度发生变化的时候触发\n      this.$store.state.navMusicDom.addEventListener(\"seeked\", () => {\n        if (this.$store.state.navMusicDom.currentTime < 1) {\n          this.index = 0; // 清空索引\n          this.zindex = 0;\n          this.activeIndex = 0;\n          this.yscroll = 0; // 清空滚动距离\n          this.$refs.list.style.transform = \"translateY(0px)\"; // 滚动回顶部\n        } else {\n          // for 循环遍历歌词数组  songLyric歌词时间数组\n          for (let i = 0; i < this.songLyric.length; i++) {\n            // 判断滚动到哪个歌词区间\n            if (\n              this.$store.state.navMusicDom.currentTime >= this.songLyric[i] &&\n              this.$store.state.navMusicDom.currentTime < this.songLyric[i + 1] &&\n              document.getElementsByClassName(\"itemSpan\")[i].offsetTop >\n                document.getElementsByClassName(\"LyricListContent\")[0]\n                  .clientHeight /\n                  2\n            ) {\n              let scroll =\n                document.getElementsByClassName(\"itemSpan\")[i].offsetTop -\n                document.getElementsByClassName(\"LyricListContent\")[0]\n                  .clientHeight /\n                  2;\n              this.yscroll =\n                scroll +\n                document.getElementsByClassName(\"itemSpan\")[i]\n                  .clientHeight /\n                  2;\n              this.$refs.list.style.transform =\n                \"translateY(\" + -this.yscroll + \"px)\";\n              this.activeIndex = i;\n              this.index = i;\n              this.zindex = i;\n              break;\n            }\n          }\n        }\n      });\n    });\n  },\n  computed: {\n    linearSet() {\n      return this.$store.state.playSong.linearIndex;\n    },\n  },\n};\n</script>\n<style scoped>\n.noItem {\n  float: left;\n  width: 100%;\n  height: 0.553928rem;\n}\n.playbox {\n  width: 100%;\n}\n.list {\n  transition: all 0.5s linear;\n}\n.LyricListContent {\n  width: 80%;\n  position: relative;\n  top: 3%;\n  margin: 0 auto;\n  height: 90%;\n  text-align: center;\n  overflow: hidden;\n  font-size: 15px;\n  letter-spacing: 2px;\n  color: #757575;\n  /* transform: translateY(); */\n  /* transition: ; */\n}\n.active {\n  color: #fff;\n}\n.item {\n  margin-top: 17px;\n}\n.nolyric {\n  position: relative;\n  font-size: 20px;\n  color: #fff;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n</style>"]}]}