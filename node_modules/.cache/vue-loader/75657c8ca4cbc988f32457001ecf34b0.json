{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreSheet.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZW51TmF2IGZyb20gImNvbXBvbmVudHMvY29udGV4dC9tZW51TmF2L01lbnVOYXYiOwppbXBvcnQgc2hlZXRJdGVtIGZyb20gImNvbXBvbmVudHMvY29udGV4dC9zaGVldEl0ZW0vU2hlZXRJdGVtIjsKaW1wb3J0IHNjcm9sbG5hdiBmcm9tICJjb21wb25lbnRzL2NvbnRleHQvc2Nyb2xsTmF2L1Njcm9sbE5hdiI7CmltcG9ydCBtdWkgZnJvbSAiYXNzZXRzL211aS9qcy9tdWkubWluLmpzIjsgLy8g5byV5YWlIG11aSBqcyDmlofku7YKCmltcG9ydCB7IHRvU3RyaW5nTnVtIH0gZnJvbSAiY29tbW9uL2NvbW1vbiI7CmltcG9ydCB7IGdldEhvdFNoZWV0LCBnZXRTaGVldFRhZ3MgfSBmcm9tICJuZXR3b3JrL2Rpc2NvdmVyIjsKCi8vIOW8leWFpea7keWKqOaooeWdlwovLyAubXVpLXNjcm9sbC13cmFwcGVyIOihqOekuumcgOimgei/m+ihjOa7keWKqOeahOWMuuWfnwptdWkoIi5tdWktc2Nyb2xsLXdyYXBwZXIiKS5zY3JvbGwoewogIGRlY2VsZXJhdGlvbjogMC4wMDA1LCAvL2ZsaWNrIOWHj+mAn+ezu+aVsO+8jOezu+aVsOi2iuWkp++8jOa7muWKqOmAn+W6pui2iuaFou+8jOa7muWKqOi3neemu+i2iuWwj++8jOm7mOiupOWAvDAuMDAwNgp9KTsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibW9yZVNoZWV0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFnc0xpc3Q6IFsi5YWo6YOoIl0sIC8vIOatjOWNleWIhuexu+WIl+ihqAogICAgICBhaW5kZXg6IDAsCiAgICAgIG9mZnNldDogMCwKICAgICAgc2hlZXREZXRhaWw6IFtdLCAvLyDmrYzljZXkv6Hmga8KICAgICAgbW9yZTogdHJ1ZSwgLy8g5p+l55yL5piv5ZCm5pu05aSa5pWw5o2uCiAgICAgIGluZGV4OiAwLCAvLyDliIfmjaLntKLlvJUKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBtZW51TmF2LAogICAgc2hlZXRJdGVtLAogICAgc2Nyb2xsbmF2LAogIH0sCiAgbWV0aG9kczogewogICAgdGFiVG9nZ2xlKGluZGV4KSB7CiAgICAgIGlmICh0aGlzLmluZGV4ICE9PSBpbmRleCkgewogICAgICAgIHRoaXMuc2hlZXREZXRhaWwgPSBbXTsgLy8g5riF56m65pWw5o2uCiAgICAgICAgdGhpcy5nZXRTaGVldChpbmRleCk7CiAgICAgIH0KICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgfSwKCiAgICAvLyDmrYzljZXor6bmg4XpobXot7PovawKICAgIHRvQ2xpY2soaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9wbGF5RGV0YWlsLyIgKyBpZCArICImIiArIGZhbHNlKTsKICAgIH0sCgogICAgLy8g6I635Y+W5q2M5Y2VCiAgICBnZXRTaGVldChpbmRleCkgewogICAgICBpZiAodGhpcy5tb3JlKSB7CiAgICAgICAgZ2V0SG90U2hlZXQoImhvdCIsIHRoaXMudGFnc0xpc3RbaW5kZXhdLCAzMCwgdGhpcy5vZmZzZXQgKiAzMCkudGhlbigKICAgICAgICAgIChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5tb3JlID0gcmVzLmRhdGEubW9yZTsKICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlcy5kYXRhLnBsYXlsaXN0cykgewogICAgICAgICAgICAgIHRoaXMuc2hlZXREZXRhaWwucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCwgLy8g5q2M5Y2VaWQKICAgICAgICAgICAgICAgIHJjbWR0ZXh0OiBpdGVtLm5hbWUsIC8vIOatjOWNleWQjeensAogICAgICAgICAgICAgICAgcGljVXJsOiBpdGVtLmNvdmVySW1nVXJsLCAvLyDlsIHpnaIKICAgICAgICAgICAgICAgIHBsYXlDb3VudDogdG9TdHJpbmdOdW0oaXRlbS5wbGF5Q291bnQpLCAvLyDmkq3mlL7ph48KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgICAgICB0aGlzLm9mZnNldCsrOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kdG9hc3Quc2hvdygi5rKh5pyJ5pu05aSa5q2M5Y2V5ZWmIiwgMTkwMCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g55uR5ZCs5rua5Yqo5LqL5Lu2CiAgICBsaW5lYXJTY3JvbGwoKSB7CiAgICAgIC8vIOa7muWKqOadoei3neemu+mhtumDqOeahOi3neemuwogICAgICBsZXQgc2Nyb2xsVG9wID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAvLyDlj6/op4bljLrnmoTpq5jluqYKICAgICAgbGV0IGNsaWVudEhlaWdodCA9CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgLy8g5rua5Yqo5p2h5Y+v5rua5Yqo55qE6auY5bqmCiAgICAgIGxldCBzY3JvbGxIZWlnaHQgPQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7CiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0IC0gMSkgewogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuZ2V0U2hlZXQodGhpcy5pbmRleCk7CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0sIDEwMDApOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOagh+etvuagjwogICAgZ2V0U2hlZXRUYWdzKCkudGhlbigocmVzKSA9PiB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXMuZGF0YS50YWdzKSB7CiAgICAgICAgdGhpcy50YWdzTGlzdC5wdXNoKGl0ZW0ubmFtZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8vIOiOt+WPluWFqOmDqOatjOWNleaVsOaNrgogICAgZ2V0SG90U2hlZXQoImhvdCIsICLlhajpg6giLCAzMCwgdGhpcy5vZmZzZXQgKiAzMCkudGhlbigocmVzKSA9PiB7CiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiByZXMuZGF0YS5wbGF5bGlzdHMpIHsKICAgICAgICB0aGlzLnNoZWV0RGV0YWlsLnB1c2goewogICAgICAgICAgaWQ6IGl0ZW0uaWQsIC8vIOatjOWNlWlkCiAgICAgICAgICByY21kdGV4dDogaXRlbS5uYW1lLCAvLyDmrYzljZXlkI3np7AKICAgICAgICAgIHBpY1VybDogaXRlbS5jb3ZlckltZ1VybCwgLy8g5bCB6Z2iCiAgICAgICAgICBwbGF5Q291bnQ6IHRvU3RyaW5nTnVtKGl0ZW0ucGxheUNvdW50KSwgLy8g5pKt5pS+6YePCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy5vZmZzZXQrKzsKICAgIH0pOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIG11aSgiLm11aS1zY3JvbGwtd3JhcHBlciIpLnNjcm9sbCh7CiAgICAgIGJvdW5jZTogdHJ1ZSwgLy/mmK/lkKblm57lvLkKICAgICAgc2Nyb2xsWTogZmFsc2UsIC8v5piv5ZCm56uW5ZCR5rua5YqoCiAgICAgIHNjcm9sbFg6IHRydWUsIC8v5piv5ZCm5qiq5ZCR5rua5YqoCiAgICAgIHN0YXJ0WDogMCwgLy/liJ3lp4vljJbml7bmu5rliqjoh7N4CiAgICAgIHN0YXJ0WTogMCwgLy/liJ3lp4vljJbml7bmu5rliqjoh7N5CiAgICAgIGluZGljYXRvcnM6IHRydWUsIC8v5piv5ZCm5pi+56S65rua5Yqo5p2hCiAgICB9KTsKCiAgICAvLyDnu5Hlrprmu5rliqjkuovku7YKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMubGluZWFyU2Nyb2xsKTsKICB9LAogIGRlYWN0aXZhdGVkICgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMubGluZWFyU2Nyb2xsKQogIH0KfTsK"},{"version":3,"sources":["moreSheet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"moreSheet.vue","sourceRoot":"src/views/discover/childrenComps/moreComps","sourcesContent":["<template>\n  <div class=\"moreSheet\">\n    <menu-nav class=\"nav\" :navTitle=\"'歌单广场'\"></menu-nav>\n    <scrollnav\n      class=\"snav\"\n      @tabToggle=\"tabToggle\"\n      :itemList=\"tagsList\"\n      :firstIndex=\"0\"\n    ></scrollnav>\n    <div class=\"content\">\n      <sheet-item\n        class=\"sheetitem\"\n        @click.native=\"toClick(item.id)\"\n        v-for=\"(item, index) in sheetDetail\"\n        :key=\"index\"\n        :sheetItem=\"item\"\n        :isSheet=\"true\"\n      ></sheet-item>\n    </div>\n  </div>\n</template>\n\n<script>\nimport menuNav from \"components/context/menuNav/MenuNav\";\nimport sheetItem from \"components/context/sheetItem/SheetItem\";\nimport scrollnav from \"components/context/scrollNav/ScrollNav\";\nimport mui from \"assets/mui/js/mui.min.js\"; // 引入 mui js 文件\n\nimport { toStringNum } from \"common/common\";\nimport { getHotSheet, getSheetTags } from \"network/discover\";\n\n// 引入滑动模块\n// .mui-scroll-wrapper 表示需要进行滑动的区域\nmui(\".mui-scroll-wrapper\").scroll({\n  deceleration: 0.0005, //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006\n});\n\nexport default {\n  name: \"moreSheet\",\n  data() {\n    return {\n      tagsList: [\"全部\"], // 歌单分类列表\n      aindex: 0,\n      offset: 0,\n      sheetDetail: [], // 歌单信息\n      more: true, // 查看是否更多数据\n      index: 0, // 切换索引\n    };\n  },\n  components: {\n    menuNav,\n    sheetItem,\n    scrollnav,\n  },\n  methods: {\n    tabToggle(index) {\n      if (this.index !== index) {\n        this.sheetDetail = []; // 清空数据\n        this.getSheet(index);\n      }\n      this.index = index;\n    },\n\n    // 歌单详情页跳转\n    toClick(id) {\n      this.$router.push(\"/playDetail/\" + id + \"&\" + false);\n    },\n\n    // 获取歌单\n    getSheet(index) {\n      if (this.more) {\n        getHotSheet(\"hot\", this.tagsList[index], 30, this.offset * 30).then(\n          (res) => {\n            this.more = res.data.more;\n            for (const item of res.data.playlists) {\n              this.sheetDetail.push({\n                id: item.id, // 歌单id\n                rcmdtext: item.name, // 歌单名称\n                picUrl: item.coverImgUrl, // 封面\n                playCount: toStringNum(item.playCount), // 播放量\n              });\n            }\n            this.$loading.loadingNo();\n            this.offset++;\n          }\n        );\n      } else {\n        this.$toast.show(\"没有更多歌单啦\", 1900);\n      }\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.getSheet(this.index);\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    // 标签栏\n    getSheetTags().then((res) => {\n      for (const item of res.data.tags) {\n        this.tagsList.push(item.name);\n      }\n    });\n\n    // 获取全部歌单数据\n    getHotSheet(\"hot\", \"全部\", 30, this.offset * 30).then((res) => {\n      for (const item of res.data.playlists) {\n        this.sheetDetail.push({\n          id: item.id, // 歌单id\n          rcmdtext: item.name, // 歌单名称\n          picUrl: item.coverImgUrl, // 封面\n          playCount: toStringNum(item.playCount), // 播放量\n        });\n      }\n      this.offset++;\n    });\n  },\n  mounted() {\n    mui(\".mui-scroll-wrapper\").scroll({\n      bounce: true, //是否回弹\n      scrollY: false, //是否竖向滚动\n      scrollX: true, //是否横向滚动\n      startX: 0, //初始化时滚动至x\n      startY: 0, //初始化时滚动至y\n      indicators: true, //是否显示滚动条\n    });\n\n    // 绑定滚动事件\n    document.addEventListener(\"scroll\", this.linearScroll);\n  },\n  deactivated () {\n    document.removeEventListener(\"scroll\", this.linearScroll)\n  }\n};\n</script>\n<style scoped>\n.snav {\n  position: fixed;\n  top: 44px;\n  z-index: 10;\n  /* margin-top: 44px; */\n}\n.nav {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n.mui-content {\n  position: fixed;\n  top: 1.171771rem;\n  left: 0;\n  right: 0;\n  z-index: 10;\n}\n#slider {\n  height: 1.091877rem;\n  background-color: #fff;\n}\n#sliderSegmentedControl {\n  height: 100%;\n}\n.moreSheet {\n  touch-action: none;\n  width: 100%;\n  background-color: #fff;\n}\n.activeBorder {\n  box-sizing: border-box;\n  border-bottom: 2px solid red;\n}\n.active {\n  color: red;\n  box-sizing: border-box;\n  border-bottom: 2px solid red;\n}\n.content {\n  padding: 0.266312rem 0.319574rem;\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  margin: 2.396804rem 0 1.331558rem;\n  min-height: 13.315579rem;\n  background-color: #fff;\n}\n.sheetitem {\n  width: 30%;\n  margin-bottom: 0.266312rem;\n}\n</style>"]}]}