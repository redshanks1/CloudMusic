{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailVideo.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailVideo.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNlYXJjaFJlc3VsdCB9IGZyb20gIm5ldHdvcmsvc2VhcmNoIjsKaW1wb3J0IHsgdG9TdHJpbmdOdW0sIGR1cmF0aW9uVGltZSB9IGZyb20gImNvbW1vbi9jb21tb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRldGFpbFZpZGVvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb2Zmc2V0OiAwLAogICAgICB2aWRlb0xpc3Q6IFtdLAogICAgICBtb3JlOiB0cnVlLAogICAgICBub0RldGFpbDogdHJ1ZSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bmlbDmja4KICAgIGdldFNlYXJjaFJlc3VsdCgpIHsKICAgICAgaWYgKHRoaXMubW9yZSkgewogICAgICAgIHNlYXJjaFJlc3VsdCgKICAgICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5rZXl3b3JkcywKICAgICAgICAgIDQwLAogICAgICAgICAgdGhpcy5vZmZzZXQgKiA0MCwKICAgICAgICAgIDEwMTQKICAgICAgICApLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlcy5kYXRhLnJlc3VsdC52aWRlb3MpIHsKICAgICAgICAgICAgdGhpcy52aWRlb0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgaWQ6IGl0ZW0udmlkLAogICAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgICAgIGR1cmF0aW9ubXM6IGR1cmF0aW9uVGltZShpdGVtLmR1cmF0aW9ubXMpLAogICAgICAgICAgICAgIHBsYXlUaW1lOiB0b1N0cmluZ051bShpdGVtLnBsYXlUaW1lKSwKICAgICAgICAgICAgICBjb3ZlclVybDogaXRlbS5jb3ZlclVybCwKICAgICAgICAgICAgICBjcmVhdG9yOiBpdGVtLmNyZWF0b3JbMF0udXNlck5hbWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vZmZzZXQrKzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdC5zaG93KCLmsqHmnInmm7TlpJrkuoY6KCIsIDE5MDApOwogICAgICB9CiAgICB9LAoKICAgIHRvVmlkZW8oaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9tdnBsYXkvIiArIGlkICsgIiYiICsgZmFsc2UpOwogICAgfSwKCiAgICAvLyDnm5HlkKzmu5rliqjkuovku7YKICAgIGxpbmVhclNjcm9sbCgpIHsKICAgICAgLy8g5rua5Yqo5p2h6Led56a76aG26YOo55qE6Led56a7CiAgICAgIGxldCBzY3JvbGxUb3AgPQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgIC8vIOWPr+inhuWMuueahOmrmOW6pgogICAgICBsZXQgY2xpZW50SGVpZ2h0ID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OwogICAgICAvLyDmu5rliqjmnaHlj6/mu5rliqjnmoTpq5jluqYKICAgICAgbGV0IHNjcm9sbEhlaWdodCA9CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgICAgaWYgKHNjcm9sbFRvcCArIGNsaWVudEhlaWdodCA+PSBzY3JvbGxIZWlnaHQgLSAxKSB7CiAgICAgICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nU2hvdygpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5nZXRTZWFyY2hSZXN1bHQoKTsKICAgICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ05vKCk7CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nU2hvdygpOwogICAgc2VhcmNoUmVzdWx0KHRoaXMuJHJvdXRlLnBhcmFtcy5rZXl3b3JkcywgNDAsIHRoaXMub2Zmc2V0ICogNDAsIDEwMTQpLnRoZW4oCiAgICAgIChyZXMpID0+IHsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHJlcy5kYXRhLnJlc3VsdC52aWRlb3MpIHsKICAgICAgICAgICAgdGhpcy52aWRlb0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgaWQ6IGl0ZW0udmlkLAogICAgICAgICAgICAgIHRpdGxlOiBpdGVtLnRpdGxlLAogICAgICAgICAgICAgIGR1cmF0aW9ubXM6IGR1cmF0aW9uVGltZShpdGVtLmR1cmF0aW9ubXMpLAogICAgICAgICAgICAgIHBsYXlUaW1lOiB0b1N0cmluZ051bShpdGVtLnBsYXlUaW1lKSwKICAgICAgICAgICAgICBjb3ZlclVybDogaXRlbS5jb3ZlclVybCwKICAgICAgICAgICAgICBjcmVhdG9yOiBpdGVtLmNyZWF0b3JbMF0udXNlck5hbWUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLm5vRGV0YWlsID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRoaXMub2Zmc2V0Kys7CiAgICAgIH0KICAgICk7CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmxpbmVhclNjcm9sbCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmxpbmVhclNjcm9sbCk7CiAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ05vKCk7CiAgICB9KTsKICB9LAp9Owo="},{"version":3,"sources":["DetailVideo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailVideo.vue","sourceRoot":"src/views/search/childrenComps","sourcesContent":["<template>\n  <div class=\"DetailVideo\" v-if=\"noDetail\">\n    <div\n      class=\"videoItem\"\n      @click=\"toVideo(item.id)\"\n      v-for=\"(item, index) in videoList\"\n      :key=\"index\"\n    >\n      <div class=\"vleft\">\n        <img :src=\"item.coverUrl\" alt=\"\" />\n        <div class=\"count\">▷ {{ item.playTime }}</div>\n      </div>\n      <div class=\"vright\">\n        <div class=\"vbox\">\n          <div class=\"vtitle\">{{ item.title }}</div>\n          <div class=\"videoDetail\">\n            {{ item.durationms + \" by \" }}{{ item.creator }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"noDetail\" v-else>没有更多了哦~</div>\n</template>\n\n<script>\nimport { searchResult } from \"network/search\";\nimport { toStringNum, durationTime } from \"common/common\";\nexport default {\n  name: \"DetailVideo\",\n  data() {\n    return {\n      offset: 0,\n      videoList: [],\n      more: true,\n      noDetail: true,\n    };\n  },\n  methods: {\n    // 获取数据\n    getSearchResult() {\n      if (this.more) {\n        searchResult(\n          this.$route.params.keywords,\n          40,\n          this.offset * 40,\n          1014\n        ).then((res) => {\n          for (const item of res.data.result.videos) {\n            this.videoList.push({\n              id: item.vid,\n              title: item.title,\n              durationms: durationTime(item.durationms),\n              playTime: toStringNum(item.playTime),\n              coverUrl: item.coverUrl,\n              creator: item.creator[0].userName,\n            });\n          }\n          this.offset++;\n        });\n      } else {\n        this.$toast.show(\"没有更多了:(\", 1900);\n      }\n    },\n\n    toVideo(id) {\n      this.$router.push(\"/mvplay/\" + id + \"&\" + false);\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.getSearchResult();\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    this.$loading.loadingShow();\n    searchResult(this.$route.params.keywords, 40, this.offset * 40, 1014).then(\n      (res) => {\n        try {\n          for (const item of res.data.result.videos) {\n            this.videoList.push({\n              id: item.vid,\n              title: item.title,\n              durationms: durationTime(item.durationms),\n              playTime: toStringNum(item.playTime),\n              coverUrl: item.coverUrl,\n              creator: item.creator[0].userName,\n            });\n          }\n        } catch (error) {\n          this.noDetail = false;\n        }\n        this.offset++;\n      }\n    );\n  },\n  destroyed() {\n    document.removeEventListener(\"scroll\", this.linearScroll);\n  },\n  mounted() {\n    this.$nextTick(() => {\n      document.addEventListener(\"scroll\", this.linearScroll);\n      this.$loading.loadingNo();\n    });\n  },\n};\n</script>\n<style scoped>\n.noDetail {\n  width: 100%;\n  min-height: 13.315579rem;\n  margin-bottom: 0.133156rem;\n  margin-top: 2.396804rem;\n  line-height: 13.315579rem;\n  text-align: center;\n  font-size: 0.532623rem;\n  color: #a7a7a8;\n}\n.DetailVideo {\n  width: 100%;\n  min-height: 13.315579rem;\n  margin-bottom: 0.133156rem;\n  margin-top: 2.396804rem;\n}\n.videoItem {\n  display: flex;\n  height: 1.997337rem;\n  margin-bottom: 0.213049rem;\n}\n.vleft {\n  flex: 4;\n  position: relative;\n}\n.count {\n  position: absolute;\n  right: 0.319574rem;\n  top: 0;\n  color: #fff;\n  font-size: 0.319574rem;\n}\n.vleft img {\n  width: 3.462051rem;\n  height: 100%;\n  border-radius: 0.133156rem;\n}\n.vright {\n  flex: 6;\n  display: flex;\n  align-items: center;\n}\n.vtitle {\n  text-overflow: -o-ellipsis-lastline;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  font-size: 0.346205rem;\n}\n.videoDetail {\n  font-size: 0.319574rem;\n  color: #a7a7a8;\n}\n</style>"]}]}