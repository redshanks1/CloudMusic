{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\video\\Video.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\video\\Video.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzY3JvbGxuYXYgZnJvbSAiY29tcG9uZW50cy9jb250ZXh0L3Njcm9sbE5hdi9TY3JvbGxOYXYiOyAvLyDlr7zoiKrmoI8KaW1wb3J0IG12SXRlbSBmcm9tICJjb21wb25lbnRzL2NvbnRleHQvbXYvTXZJdGVtIjsgLy8g6KeG6aKR57uE5Lu2CgppbXBvcnQgeyB0b1N0cmluZ051bSwgZHVyYXRpb25UaW1lIH0gZnJvbSAiY29tbW9uL2NvbW1vbiI7CmltcG9ydCB7IHZpZGVvQ2F0ZWdvcnksIGdldERldGFpbCB9IGZyb20gIm5ldHdvcmsvdmlkZW8iOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlZpZGVvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbUxpc3Q6IFswXSwgLy8g5YiG57G75YiX6KGoCiAgICAgIGl0ZW1JZDogW10sIC8vIGlk5YiX6KGoCiAgICAgIG9mZnNldDogMCwgLy8g5YiG6aG1CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgdmVkaW9MaXN0OiBbXSwgLy8g6KeG6aKR5pWw57uECiAgICAgIGFjdGl2ZUlkOiAwLCAvLyDlpITkuo7mtLvot4PnirbmgIHnmoTliIbnsbsKICAgICAgYWN0aXZlSW5kZXg6IDAsIC8vIOWkhOS6jua0u+i3g+eKtuaAgeeahOWIhuexuwogICAgICBoYXNtb3JlOiB0cnVlLCAvLyDmmK/lkKbmnInmlbDmja4KICAgICAgbXNnOiAiIiwgLy8g5o+Q56S6CiAgICAgIG1vcmU6IHRydWUsCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgc2Nyb2xsbmF2LAogICAgbXZJdGVtLAogIH0sCiAgbWV0aG9kczogewogICAgLy8g5a+86Iiq5qCP5YiH5o2iCiAgICB0YWJUb2dnbGUoaW5kZXgpIHsKICAgICAgLy8g5Yik5pat5piv5ZCm5YiH5o2i5a+86Iiq5qCPCiAgICAgIGlmICh0aGlzLmFjdGl2ZUluZGV4ICE9PSBpbmRleCkgewogICAgICAgIHRoaXMubW9yZSA9IHRydWU7CiAgICAgICAgdGhpcy52ZWRpb0xpc3QgPSBbXTsgLy8g5riF56m65pWw57uECiAgICAgICAgdGhpcy5vZmZzZXQgPSAwOyAvLyDmuIXnqbrpobXmlbAKICAgICAgICB0aGlzLmdldFZpZGVvRGV0YWlsKHRoaXMuaXRlbUlkW2luZGV4XSk7IC8vIOiwg+eUqOaWueazlQogICAgICB9CiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleDsKICAgIH0sCgogICAgLy8g5bCB6KOF5pa55rOVCiAgICBnZXRWaWRlb0RldGFpbChpZCkgewogICAgICBpZiAodGhpcy5tb3JlKSB7CiAgICAgICAgZ2V0RGV0YWlsKGlkLCB0aGlzLm9mZnNldCwgdGhpcy4kc3RvcmUuc3RhdGUuY29va2llKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICAgIHRoaXMuaGFzbW9yZSA9IHJlcy5kYXRhLmhhc21vcmU7CiAgICAgICAgICB0aGlzLm1vcmUgPSByZXMuZGF0YS5oYXNtb3JlOwogICAgICAgICAgdGhpcy5tc2cgPSByZXMuZGF0YS5tc2c7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEuZGF0YXMpIHsKICAgICAgICAgICAgdGhpcy52ZWRpb0xpc3QucHVzaCh7CiAgICAgICAgICAgICAgaW1ndXJsMTZ2OTogaXRlbS5kYXRhLmNvdmVyVXJsLCAvLyDlsIHpnaIKICAgICAgICAgICAgICBwbGF5Q291bnQ6IHRvU3RyaW5nTnVtKGl0ZW0uZGF0YS5wbGF5VGltZSksIC8vIOaSreaUvumHjwogICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvblRpbWUoaXRlbS5kYXRhLmR1cmF0aW9ubXMpLCAvLyDml7bplb8KICAgICAgICAgICAgICBuYW1lOiBpdGVtLmRhdGEudGl0bGUsIC8vIOagh+mimAogICAgICAgICAgICAgIGlkOiBpdGVtLmRhdGEudmlkLCAvLyB2aWQKICAgICAgICAgICAgICBhdmF0YXJVcmw6IGl0ZW0uZGF0YS5jcmVhdG9yLmF2YXRhclVybCwgLy8g5L2c6ICF5aS05YOPCiAgICAgICAgICAgICAgbmlja25hbWU6IGl0ZW0uZGF0YS5jcmVhdG9yLm5pY2tuYW1lLCAvLyDkvZzogIXmmLXnp7AKICAgICAgICAgICAgICBwcmFpc2VkQ291bnQ6IGl0ZW0uZGF0YS5wcmFpc2VkQ291bnQsIC8vIOeCuei1nuaVsAogICAgICAgICAgICAgIGNvbW1lbnRDb3VudDogaXRlbS5kYXRhLmNvbW1lbnRDb3VudCwgLy8g6K+E6K665pWwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5vZmZzZXQrKzsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nTm8oKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0LnNob3coIuayoeacieabtOWkmuS6hjooIiwgMTkwMCk7CiAgICAgIH0KICAgIH0sCgogICAgLy8g55uR5ZCs5rua5Yqo5LqL5Lu2CiAgICBsaW5lYXJTY3JvbGwoKSB7CiAgICAgIC8vIOa7muWKqOadoei3neemu+mhtumDqOeahOi3neemuwogICAgICBsZXQgc2Nyb2xsVG9wID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAvLyDlj6/op4bljLrnmoTpq5jluqYKICAgICAgbGV0IGNsaWVudEhlaWdodCA9CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgLy8g5rua5Yqo5p2h5Y+v5rua5Yqo55qE6auY5bqmCiAgICAgIGxldCBzY3JvbGxIZWlnaHQgPQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7CiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0IC0gMSkgewogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5nZXRWaWRlb0RldGFpbCh0aGlzLmFjdGl2ZUlkKTsKICAgICAgICB9LCAxMDAwKTsKICAgICAgfQogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2aWRlb0NhdGVnb3J5KCkudGhlbigocmVzKSA9PiB7CiAgICAgIHRoaXMuaXRlbUxpc3QgPSBbXTsgLy8g5riF56m65pWw57uE5YaF5a65CiAgICAgIHRoaXMuYWN0aXZlSWQgPSByZXMuZGF0YS5kYXRhWzBdLmlkOyAvLyDkv53lrZjnrKzkuIDpoblpZAogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEzOyBpKyspIHsKICAgICAgICB0aGlzLml0ZW1MaXN0LnB1c2gocmVzLmRhdGEuZGF0YVtpXS5uYW1lKTsKICAgICAgICB0aGlzLml0ZW1JZC5wdXNoKHJlcy5kYXRhLmRhdGFbaV0uaWQpOwogICAgICB9CgogICAgICAvLyDop4bpopHliJfooagKICAgICAgdGhpcy5nZXRWaWRlb0RldGFpbCh0aGlzLml0ZW1JZFswXSk7CiAgICB9KTsKICB9LAogIGFjdGl2YXRlZCgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy5saW5lYXJTY3JvbGwpOwogICAgfSk7CiAgfSwKICBkZWFjdGl2YXRlZCgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMubGluZWFyU2Nyb2xsKTsKICB9LAp9Owo="},{"version":3,"sources":["Video.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Video.vue","sourceRoot":"src/views/video","sourcesContent":["<template>\n  <div class=\"Video\">\n    <scrollnav\n      ref=\"videoNav\"\n      class=\"snav\"\n      :itemList=\"itemList\"\n      :firstIndex=\"0\"\n      @tabToggle=\"tabToggle\"\n    ></scrollnav>\n    <div class=\"content\" v-if=\"hasmore\">\n      <mv-item\n        :vedioList=\"vedioList\"\n        :isShowDetail=\"true\"\n        :isShowTag=\"false\"\n        :isMv=\"false\"\n      ></mv-item>\n    </div>\n    <div class=\"nocontent\" v-else>\n      {{ msg }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport scrollnav from \"components/context/scrollNav/ScrollNav\"; // 导航栏\nimport mvItem from \"components/context/mv/MvItem\"; // 视频组件\n\nimport { toStringNum, durationTime } from \"common/common\";\nimport { videoCategory, getDetail } from \"network/video\";\nexport default {\n  name: \"Video\",\n  data() {\n    return {\n      itemList: [0], // 分类列表\n      itemId: [], // id列表\n      offset: 0, // 分页\n      withCredentials: true,\n      vedioList: [], // 视频数组\n      activeId: 0, // 处于活跃状态的分类\n      activeIndex: 0, // 处于活跃状态的分类\n      hasmore: true, // 是否有数据\n      msg: \"\", // 提示\n      more: true,\n    };\n  },\n  components: {\n    scrollnav,\n    mvItem,\n  },\n  methods: {\n    // 导航栏切换\n    tabToggle(index) {\n      // 判断是否切换导航栏\n      if (this.activeIndex !== index) {\n        this.more = true;\n        this.vedioList = []; // 清空数组\n        this.offset = 0; // 清空页数\n        this.getVideoDetail(this.itemId[index]); // 调用方法\n      }\n      this.activeIndex = index;\n    },\n\n    // 封装方法\n    getVideoDetail(id) {\n      if (this.more) {\n        getDetail(id, this.offset, this.$store.state.cookie).then((res) => {\n          this.$loading.loadingShow();\n          this.hasmore = res.data.hasmore;\n          this.more = res.data.hasmore;\n          this.msg = res.data.msg;\n          for (const item of res.data.datas) {\n            this.vedioList.push({\n              imgurl16v9: item.data.coverUrl, // 封面\n              playCount: toStringNum(item.data.playTime), // 播放量\n              duration: durationTime(item.data.durationms), // 时长\n              name: item.data.title, // 标题\n              id: item.data.vid, // vid\n              avatarUrl: item.data.creator.avatarUrl, // 作者头像\n              nickname: item.data.creator.nickname, // 作者昵称\n              praisedCount: item.data.praisedCount, // 点赞数\n              commentCount: item.data.commentCount, // 评论数\n            });\n          }\n          this.offset++;\n          this.$nextTick(() => {\n            this.$loading.loadingNo();\n          });\n        });\n      } else {\n        this.$toast.show(\"没有更多了:(\", 1900);\n      }\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        setTimeout(() => {\n          this.getVideoDetail(this.activeId);\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    videoCategory().then((res) => {\n      this.itemList = []; // 清空数组内容\n      this.activeId = res.data.data[0].id; // 保存第一项id\n      for (let i = 0; i < 13; i++) {\n        this.itemList.push(res.data.data[i].name);\n        this.itemId.push(res.data.data[i].id);\n      }\n\n      // 视频列表\n      this.getVideoDetail(this.itemId[0]);\n    });\n  },\n  activated() {\n    this.$nextTick(() => {\n      document.addEventListener(\"scroll\", this.linearScroll);\n    });\n  },\n  deactivated() {\n    document.removeEventListener(\"scroll\", this.linearScroll);\n  },\n};\n</script>\n<style scoped>\n.Video {\n  width: 100%;\n  background-color: #fff;\n}\n.snav {\n  background-color: #fff;\n  top: 44px;\n  position: fixed;\n  left: 0;\n  right: 0;\n  z-index: 12;\n}\n.content {\n  margin-top: 2.237017rem;\n  margin-bottom: 1.198402rem;\n}\n.nocontent {\n  width: 100%;\n  min-height: 17.310253rem;\n  font-size: 0.532623rem;\n  background-color: #fff;\n  text-align: center;\n  line-height: 17.310253rem;\n}\n</style>"]}]}