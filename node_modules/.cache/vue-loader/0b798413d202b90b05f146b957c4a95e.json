{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreAlbum.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\discover\\childrenComps\\moreComps\\moreAlbum.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZW51bmF2IGZyb20gImNvbXBvbmVudHMvY29udGV4dC9tZW51TmF2L01lbnVOYXYiOwppbXBvcnQgc2Nyb2xsbmF2IGZyb20gImNvbXBvbmVudHMvY29udGV4dC9zY3JvbGxOYXYvU2Nyb2xsTmF2IjsKCmltcG9ydCB7IGdldEFsYnVtIH0gZnJvbSAibmV0d29yay9kaXNjb3ZlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIm1vcmVBbGJ1bSIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9mZnNldDogMCwKICAgICAgdGFnTGlzdDogWyLlhajpg6giLCAi5Y2O6K+tIiwgIuasp+e+jiIsICLpn6nlm70iLCAi5pel5pysIl0sCiAgICAgIGFsYnVtTGlzdDogW10sIC8vIOS4k+i+keaVsOe7hAogICAgICBuYW1lOiAi5o6o6I2QIiwKICAgICAgdGVzdDogIlJlY29tbWVuZCIsCiAgICAgIEFyZWE6ICLlhajpg6giLAogICAgICBsb2FkaW5nOiBmYWxzZSwgICAgIAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIG1lbnVuYXYsCiAgICBzY3JvbGxuYXYsCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDlm77niYfliqDovb3kuovku7YKICAgIGltZ2xvYWQoaW5kZXgpewogICAgICB0aGlzLmFsYnVtTGlzdFtpbmRleF0uc2hvd0JsYWNrID0gdHJ1ZQogICAgfSwKCiAgICAvLyDot6/nlLHot7PovawKICAgIGFsYnVtU2hvdyhpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3BsYXlEZXRhaWwvIiArIGlkICsgIiYiICsgdHJ1ZSk7CiAgICB9LAoKICAgIC8vIOWvvOiIquagj+WIh+aNogogICAgdGFiVG9nZ2xlKGluZGV4KSB7CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLmFsYnVtKCJBTEwiLCAiaG90Iik7CiAgICAgICAgICB0aGlzLkFyZWEgPSAi5YWo6YOoIjsKICAgICAgICAgIHRoaXMubmFtZSA9ICLlhajpg6giOwogICAgICAgICAgdGhpcy50ZXN0ID0gIlJlY29tbWVuZCI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE6CiAgICAgICAgICB0aGlzLmFsYnVtKCJaSCIsICJob3QiKTsKICAgICAgICAgIHRoaXMuQXJlYSA9ICLljY7or60iOwogICAgICAgICAgdGhpcy5uYW1lID0gIuWNjuivrSI7CiAgICAgICAgICB0aGlzLnRlc3QgPSAiTWFuZGFyaW4gTXVzaWMiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5hbGJ1bSgiRUEiLCAiaG90Iik7CiAgICAgICAgICB0aGlzLkFyZWEgPSAi5qyn576OIjsKICAgICAgICAgIHRoaXMubmFtZSA9ICLmrKfnvo4iOwogICAgICAgICAgdGhpcy50ZXN0ID0gIldlc3Rlcm4gTXVzaWMiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAzOgogICAgICAgICAgdGhpcy5hbGJ1bSgiS1IiLCAiaG90Iik7CiAgICAgICAgICB0aGlzLkFyZWEgPSAi6Z+p5Zu9IjsKICAgICAgICAgIHRoaXMubmFtZSA9ICLpn6nlm70iOwogICAgICAgICAgdGhpcy50ZXN0ID0gIktvcmVhbiBNdXNpYyI7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICB0aGlzLmFsYnVtKCJKUCIsICJob3QiKTsKICAgICAgICAgIHRoaXMuQXJlYSA9ICLml6XmnKwiOwogICAgICAgICAgdGhpcy5uYW1lID0gIuaXpeacrCI7CiAgICAgICAgICB0aGlzLnRlc3QgPSAiSmFwYW5lc2UgTXVzaWMiOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWwgeijheaWueazlQogICAgYWxidW0oYXJlYSwgdHlwZSkgewogICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdTaG93KCk7CiAgICAgIGlmICh0aGlzLkFyZWEgIT09IGFyZWEpIHsKICAgICAgICB0aGlzLm9mZnNldCA9IDA7CiAgICAgICAgdGhpcy5hbGJ1bUxpc3QgPSBbXTsKICAgICAgICBnZXRBbGJ1bSgzMCwgdGhpcy5vZmZzZXQgKiAzMCwgYXJlYSwgdHlwZSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEubW9udGhEYXRhKSB7CiAgICAgICAgICAgIHRoaXMuYWxidW1MaXN0LnB1c2goewogICAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgICBwaWNVcmw6IGl0ZW0ucGljVXJsLAogICAgICAgICAgICAgIGFydGlzdDogaXRlbS5hcnRpc3QubmFtZSwKICAgICAgICAgICAgICBzaG93QmxhY2s6IGZhbHNlLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nTm8oKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICB0aGlzLkFyZWEgPSBhcmVhOwogICAgfSwKCiAgICAvLyDkuIvmi4nliqDovb0KICAgIGxvYWRpbmdBbGJ1bSgpIHsKICAgICAgdGhpcy4kbG9hZGluZy5sb2FkaW5nU2hvdygpOwogICAgICB0aGlzLm9mZnNldCA9IDE7CiAgICAgIGdldEFsYnVtKDMwLCB0aGlzLm9mZnNldCAqIDMwLCB0aGlzLkFyZWEsICJob3QiKS50aGVuKChyZXMpID0+IHsKICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcmVzLmRhdGEubW9udGhEYXRhKSB7CiAgICAgICAgICB0aGlzLmFsYnVtTGlzdC5wdXNoKHsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICAgICAgcGljVXJsOiBpdGVtLnBpY1VybCwKICAgICAgICAgICAgYXJ0aXN0OiBpdGVtLmFydGlzdC5uYW1lLAogICAgICAgICAgICBzaG93QmxhY2s6IGZhbHNlLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0KICAgICAgICB0aGlzLm9mZnNldCsrOwogICAgICB9KTsKICAgIH0sCgogICAgLy8g55uR5ZCs5rua5Yqo5LqL5Lu2CiAgICBsaW5lYXJTY3JvbGwoKSB7CiAgICAgIC8vIOa7muWKqOadoei3neemu+mhtumDqOeahOi3neemuwogICAgICBsZXQgc2Nyb2xsVG9wID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOwogICAgICAvLyDlj6/op4bljLrnmoTpq5jluqYKICAgICAgbGV0IGNsaWVudEhlaWdodCA9CiAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsKICAgICAgLy8g5rua5Yqo5p2h5Y+v5rua5Yqo55qE6auY5bqmCiAgICAgIGxldCBzY3JvbGxIZWlnaHQgPQogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ7CiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0IC0gMSkgewogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMubG9hZGluZ0FsYnVtKCk7CiAgICAgICAgICB0aGlzLiRsb2FkaW5nLmxvYWRpbmdObygpOwogICAgICAgIH0sIDEwMDApOwogICAgICB9CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gMDsKICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSAwOwogICAgdGhpcy5hbGJ1bSgiQUxMIiwgImhvdCIpOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAvLyDnu5Hlrprmu5rliqjkuovku7YKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIHRoaXMubGluZWFyU2Nyb2xsKTsKICB9LAogIGRlc3Ryb3llZCAoKSB7CiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJzY3JvbGwiLCB0aGlzLmxpbmVhclNjcm9sbCkKICB9Cn07Cg=="},{"version":3,"sources":["moreAlbum.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"moreAlbum.vue","sourceRoot":"src/views/discover/childrenComps/moreComps","sourcesContent":["<template>\n  <div class=\"moreAlbum\">\n    <menunav class=\"nav\" :navTitle=\"'更多专辑'\"></menunav>\n    <scrollnav\n      @tabToggle=\"tabToggle\"\n      class=\"snav\"\n      :itemList=\"tagList\"\n      :firstIndex=\"0\"\n    ></scrollnav>\n    <div class=\"topBox\">\n      <div class=\"video\">\n        <video\n          style=\"width: 100%; height: 4.793609rem; object-fit: fill\"\n          src=\"~assets/video/album.mp4\"\n          loop=\"loop\"\n          autoplay\n        ></video>\n      </div>\n      <div class=\"zhez\"></div>\n      <div class=\"title\">\n        <div class=\"name\">{{ name }}</div>\n        <div class=\"test\">{{ test }}</div>\n      </div>\n    </div>\n    <div class=\"content\">\n      <div\n        class=\"albumItem\"\n        @click=\"albumShow(item.id)\"\n        v-for=\"(item, index) in albumList\"\n        :key=\"index\"\n      >\n        <div class=\"topimg\">\n          <img class=\"img\" @load=\"imgload(index)\" v-lazy=\"item.picUrl\" alt=\"\" />\n          <img\n            v-show=\"item.showBlack\"\n            class=\"bgcImg\"\n            src=\"~assets/img/discover/moreAlbum/heiyuan.svg\"\n            alt=\"\"\n          />\n        </div>\n        <div class=\"albumname\">{{ item.name }}</div>\n        <div class=\"artist\">{{ item.artist }}</div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport menunav from \"components/context/menuNav/MenuNav\";\nimport scrollnav from \"components/context/scrollNav/ScrollNav\";\n\nimport { getAlbum } from \"network/discover\";\n\nexport default {\n  name: \"moreAlbum\",\n  data() {\n    return {\n      offset: 0,\n      tagList: [\"全部\", \"华语\", \"欧美\", \"韩国\", \"日本\"],\n      albumList: [], // 专辑数组\n      name: \"推荐\",\n      test: \"Recommend\",\n      Area: \"全部\",\n      loading: false,     \n    };\n  },\n  components: {\n    menunav,\n    scrollnav,\n  },\n  methods: {\n    // 图片加载事件\n    imgload(index){\n      this.albumList[index].showBlack = true\n    },\n\n    // 路由跳转\n    albumShow(id) {\n      this.$router.push(\"/playDetail/\" + id + \"&\" + true);\n    },\n\n    // 导航栏切换\n    tabToggle(index) {\n      switch (index) {\n        case 0:\n          this.album(\"ALL\", \"hot\");\n          this.Area = \"全部\";\n          this.name = \"全部\";\n          this.test = \"Recommend\";\n          break;\n        case 1:\n          this.album(\"ZH\", \"hot\");\n          this.Area = \"华语\";\n          this.name = \"华语\";\n          this.test = \"Mandarin Music\";\n          break;\n        case 2:\n          this.album(\"EA\", \"hot\");\n          this.Area = \"欧美\";\n          this.name = \"欧美\";\n          this.test = \"Western Music\";\n          break;\n        case 3:\n          this.album(\"KR\", \"hot\");\n          this.Area = \"韩国\";\n          this.name = \"韩国\";\n          this.test = \"Korean Music\";\n          break;\n        case 4:\n          this.album(\"JP\", \"hot\");\n          this.Area = \"日本\";\n          this.name = \"日本\";\n          this.test = \"Japanese Music\";\n          break;\n        default:\n          break;\n      }\n    },\n\n    // 封装方法\n    album(area, type) {\n      this.$loading.loadingShow();\n      if (this.Area !== area) {\n        this.offset = 0;\n        this.albumList = [];\n        getAlbum(30, this.offset * 30, area, type).then((res) => {\n          for (const item of res.data.monthData) {\n            this.albumList.push({\n              id: item.id,\n              name: item.name,\n              picUrl: item.picUrl,\n              artist: item.artist.name,\n              showBlack: false,\n            });\n            this.$loading.loadingNo();\n          }\n        });\n      }\n      this.Area = area;\n    },\n\n    // 下拉加载\n    loadingAlbum() {\n      this.$loading.loadingShow();\n      this.offset = 1;\n      getAlbum(30, this.offset * 30, this.Area, \"hot\").then((res) => {\n        for (const item of res.data.monthData) {\n          this.albumList.push({\n            id: item.id,\n            name: item.name,\n            picUrl: item.picUrl,\n            artist: item.artist.name,\n            showBlack: false,\n          });\n          this.$loading.loadingNo();\n        }\n        this.offset++;\n      });\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        this.$loading.loadingShow();\n        setTimeout(() => {\n          this.loadingAlbum();\n          this.$loading.loadingNo();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    document.body.scrollTop = 0;\n    document.documentElement.scrollTop = 0;\n    this.album(\"ALL\", \"hot\");\n  },\n\n  mounted() {\n    // 绑定滚动事件\n    document.addEventListener(\"scroll\", this.linearScroll);\n  },\n  destroyed () {\n    document.removeEventListener(\"scroll\", this.linearScroll)\n  }\n};\n</script>\n<style scoped>\n.nav {\n  position: fixed;\n  z-index: 20;\n  top: 0;\n  left: 0;\n  right: 0;\n}\n.snav {\n  position: fixed;\n  top: 44px;\n  left: 0;\n  right: 0;\n  z-index: 19;\n}\n.moreAlbum {\n  width: 100%;\n  background-color: #fff;\n}\n.video {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n}\n.zhez {\n  position: absolute;\n  width: 100%;\n  height: 4.793609rem;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 9;\n}\n.topBox {\n  margin-top: 2.237017rem;\n  width: 100%;\n  height: 4.527297rem;\n  position: relative;\n  z-index: 10;\n  top: -0.079893rem;\n  background-color: #fff;\n  border-bottom: 8px solid #ebebeb;\n}\n.title {\n  width: 100%;\n  height: 28%;\n  position: absolute;\n  z-index: 10;\n  margin-left: 0.399467rem;\n  bottom: 0;\n  color: #fff;\n}\n.name {\n  width: 100%;\n  font-weight: 550;\n  margin-bottom: 0.133156rem;\n}\n.test {\n  width: 100%;\n  font-size: 0.346205rem;\n  letter-spacing: 1px;\n  color: #b3b1b1;\n}\n.content {\n  padding: 0.266312rem 0.399467rem;\n  margin-top: 0.266312rem;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  margin-bottom: 1.331558rem;\n}\n.albumItem {\n  width: 45%;\n  height: 4.793609rem;\n  margin-bottom: 0.213049rem;\n}\n.topimg {\n  width: 3.595206rem;\n  height: 3.462051rem;\n  position: relative;\n}\n.topimg .img {\n  width: 100%;\n  height: 100%;\n  border-radius: 0.213049rem;\n  position: relative;\n  z-index: 5;\n}\n.bgcImg {\n  position: absolute;\n  right: -0.532623rem;\n  top: 0;\n}\n.albumname {\n  width: 4.12783rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 0.372836rem;\n  margin-top: 0.133156rem;\n}\n.artist {\n  width: 4.12783rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 0.319574rem;\n  color: #b3b1b1;\n}\n</style>"]}]}