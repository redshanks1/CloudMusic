{"remainingRequest":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js!F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailSheet.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\vscode\\gocode\\cloudMusic\\src\\views\\search\\childrenComps\\DetailSheet.vue","mtime":1605347186000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\vscode\\gocode\\cloudMusic\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHNlYXJjaFJlc3VsdCB9IGZyb20gIm5ldHdvcmsvc2VhcmNoIjsKaW1wb3J0IHsgdG9TdHJpbmdOdW0gfSBmcm9tICJjb21tb24vY29tbW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJEZXRhaWxTaGVldCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9mZnNldDogMCwKICAgICAgc2hlZXRMaXN0OiBbXSwKICAgICAgaGFzTW9yZTogdHJ1ZSAvLyDmm7TlpJrmlbDmja4KCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdG9TaGVldDogZnVuY3Rpb24gdG9TaGVldChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3BsYXlEZXRhaWwvIiArIGlkICsgIiYiICsgZmFsc2UpOwogICAgfSwKICAgIGdldFNlYXJjaFJlc3VsdDogZnVuY3Rpb24gZ2V0U2VhcmNoUmVzdWx0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuaGFzTW9yZSkgewogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ1Nob3coKTsKICAgICAgICBzZWFyY2hSZXN1bHQodGhpcy4kcm91dGUucGFyYW1zLmtleXdvcmRzLCAzMCwgdGhpcy5vZmZzZXQgKiAzMCwgMTAwMCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBfdGhpcy5oYXNNb3JlID0gcmVzLmRhdGEucmVzdWx0Lmhhc01vcmU7CiAgICAgICAgICB2YXIgcGF0aCA9IHJlcy5kYXRhLnJlc3VsdC5wbGF5bGlzdHM7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIF90aGlzLnNoZWV0TGlzdC5wdXNoKHsKICAgICAgICAgICAgICBpZDogcGF0aFtpXS5pZCwKICAgICAgICAgICAgICBuYW1lOiBwYXRoW2ldLm5hbWUsCiAgICAgICAgICAgICAgY292ZXJJbWdVcmw6IHBhdGhbaV0uY292ZXJJbWdVcmwsCiAgICAgICAgICAgICAgcGxheUNvdW50OiB0b1N0cmluZ051bShwYXRoW2ldLnBsYXlDb3VudCksCiAgICAgICAgICAgICAgdHJhY2tDb3VudDogcGF0aFtpXS50cmFja0NvdW50LAogICAgICAgICAgICAgIGNyZWF0b3I6IHBhdGhbaV0uY3JlYXRvci5uaWNrbmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpcy4kbG9hZGluZy5sb2FkaW5nTm8oKTsKCiAgICAgICAgICBfdGhpcy5vZmZzZXQrKzsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdC5zaG93KCfmsqHmnInmm7TlpJrkuoY6KCcsIDE5MDApOwogICAgICAgIHRoaXMuJGxvYWRpbmcubG9hZGluZ05vKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnm5HlkKzmu5rliqjkuovku7YKICAgIGxpbmVhclNjcm9sbDogZnVuY3Rpb24gbGluZWFyU2Nyb2xsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIOa7muWKqOadoei3neemu+mhtumDqOeahOi3neemuwogICAgICB2YXIgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDsgLy8g5Y+v6KeG5Yy655qE6auY5bqmCgogICAgICB2YXIgY2xpZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDsgLy8g5rua5Yqo5p2h5Y+v5rua5Yqo55qE6auY5bqmCgogICAgICB2YXIgc2Nyb2xsSGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKCiAgICAgIGlmIChzY3JvbGxUb3AgKyBjbGllbnRIZWlnaHQgPj0gc2Nyb2xsSGVpZ2h0IC0gMSkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLmdldFNlYXJjaFJlc3VsdCgpOwogICAgICAgIH0sIDEwMDApOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRTZWFyY2hSZXN1bHQoKTsKICB9LAogIGFjdGl2YXRlZDogZnVuY3Rpb24gYWN0aXZhdGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJzY3JvbGwiLCBfdGhpczMubGluZWFyU2Nyb2xsKTsKICAgIH0pOwogIH0sCiAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGRlYWN0aXZhdGVkKCkgewogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgdGhpcy5saW5lYXJTY3JvbGwpOwogIH0KfTs="},{"version":3,"sources":["DetailSheet.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"DetailSheet\">\n    <div\n      class=\"item\"\n      @click=\"toSheet(item.id)\"\n      v-for=\"(item, index) in sheetList\"\n      :key=\"index\"\n    >\n      <div class=\"left\">\n        <img :src=\"item.coverImgUrl\" alt=\"\" />\n      </div>\n      <div class=\"right\">\n        <div class=\"box\">\n          <div class=\"title\">{{ item.name }}</div>\n          <div class=\"detail\">\n            {{ item.trackCount + \"首 \" }}{{ \"by \" + item.creator + \"，\"\n            }}{{ \"播放\" + item.playCount + \"次\" }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { searchResult } from \"network/search\";\nimport { toStringNum } from \"common/common\";\nexport default {\n  name: \"DetailSheet\",\n  data() {\n    return {\n      offset: 0,\n      sheetList: [],\n      hasMore: true, // 更多数据\n    };\n  },\n  methods: {\n    toSheet(id) {\n      this.$router.push(\"/playDetail/\" + id + \"&\" + false);\n    },\n\n    getSearchResult() {\n      if (this.hasMore) {\n        this.$loading.loadingShow();\n        searchResult(\n          this.$route.params.keywords,\n          30,\n          this.offset * 30,\n          1000\n        ).then((res) => {\n          this.hasMore = res.data.result.hasMore;\n          let path = res.data.result.playlists;\n          for (let i = 0; i < path.length; i++) {\n            this.sheetList.push({\n              id: path[i].id,\n              name: path[i].name,\n              coverImgUrl: path[i].coverImgUrl,\n              playCount: toStringNum(path[i].playCount),\n              trackCount: path[i].trackCount,\n              creator: path[i].creator.nickname,\n            });\n          }\n          this.$loading.loadingNo();\n          this.offset++;\n        });\n      } else {\n        this.$toast.show('没有更多了:(',1900)\n        this.$loading.loadingNo();\n      }\n    },\n\n    // 监听滚动事件\n    linearScroll() {\n      // 滚动条距离顶部的距离\n      let scrollTop =\n        document.documentElement.scrollTop || document.body.scrollTop;\n      // 可视区的高度\n      let clientHeight =\n        document.documentElement.clientHeight || document.body.clientHeight;\n      // 滚动条可滚动的高度\n      let scrollHeight =\n        document.documentElement.scrollHeight || document.body.scrollHeight;\n      if (scrollTop + clientHeight >= scrollHeight - 1) {\n        setTimeout(() => {\n          this.getSearchResult();\n        }, 1000);\n      }\n    },\n  },\n  created() {\n    this.getSearchResult();\n  },\n  activated() {\n    this.$nextTick(() => {\n      document.addEventListener(\"scroll\", this.linearScroll);\n    });\n  },\n  deactivated() {\n    document.removeEventListener(\"scroll\", this.linearScroll);\n  },\n};\n</script>\n<style scoped>\n.DetailSheet {\n  width: 100%;\n  min-height: 13.315579rem;\n  margin-bottom: 0.133156rem;\n  margin-top: 2.396804rem;\n}\n.item {\n  display: flex;\n  height: 1.198402rem;\n  width: 100%;\n  margin-bottom: 0.399467rem;\n}\n.left {\n  flex: 1.5;\n}\n.left img {\n  width: 1.198402rem;\n  height: 100%;\n  border-radius: 0.133156rem;\n}\n.right {\n  flex: 8.5;\n  display: flex;\n  align-items: center;\n}\n.title {\n  width: 7.190413rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 0.372836rem;\n  margin-left: 0.133156rem;\n}\n.detail {\n  width: 7.190413rem;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 0.319574rem;\n  color: rgb(150, 150, 150);\n  height: 0.399467rem;\n  line-height: 0.399467rem;\n  margin-left: 0.133156rem;\n}\n</style>"],"sourceRoot":"src/views/search/childrenComps"}]}